<?xml version="1.0" encoding="UTF-8" ?>
<!-- This is a WordPress eXtended RSS file generated by WordPress as an export of your site. -->
<!-- It contains information about your site's posts, pages, comments, categories, and other content. -->
<!-- You may use this file to transfer that content from one site to another. -->
<!-- This file is not intended to serve as a complete backup of your site. -->

<!-- To import this information into a WordPress site follow these steps: -->
<!-- 1. Log in to that site as an administrator. -->
<!-- 2. Go to Tools: Import in the WordPress admin panel. -->
<!-- 3. Install the "WordPress" importer from the list. -->
<!-- 4. Activate & Run Importer. -->
<!-- 5. Upload this file using the form provided on that page. -->
<!-- 6. You will first be asked to map the authors in this export file to users -->
<!--    on the site. For each author, you may choose to map to an -->
<!--    existing user on the site or to create a new user. -->
<!-- 7. WordPress will then import each of the posts, pages, comments, categories, etc. -->
<!--    contained in this file into your site. -->

	
<rss version="2.0"
	xmlns:excerpt="http://wordpress.org/export/1.2/excerpt/"
	xmlns:content="http://purl.org/rss/1.0/modules/content/"
	xmlns:wfw="http://wellformedweb.org/CommentAPI/"
	xmlns:dc="http://purl.org/dc/elements/1.1/"
	xmlns:wp="http://wordpress.org/export/1.2/"
>

<channel>
	<title>AWX Docs</title>
	<link>https://awxdocs.com</link>
	<description>Just another Website</description>
	<pubDate>Mon, 31 May 2021 16:14:57 +0000</pubDate>
	<language>en-US</language>
	<wp:wxr_version>1.2</wp:wxr_version>
	<wp:base_site_url>https://awxdocs.com</wp:base_site_url>
	<wp:base_blog_url>https://awxdocs.com</wp:base_blog_url>

		<wp:author><wp:author_id>68</wp:author_id><wp:author_login><![CDATA[abhishek B]]></wp:author_login><wp:author_email><![CDATA[abhishek@amiworks.com]]></wp:author_email><wp:author_display_name><![CDATA[abhishek]]></wp:author_display_name><wp:author_first_name><![CDATA[abhishek]]></wp:author_first_name><wp:author_last_name><![CDATA[]]></wp:author_last_name></wp:author>

				
	<item>
		<title><![CDATA[Training]]></title>
		<link>https://awxdocs.com/training/</link>
		<pubDate>Thu, 15 Oct 2020 05:15:41 +0000</pubDate>
		<dc:creator><![CDATA[abhishek B]]></dc:creator>
		<guid isPermaLink="false">https://awxdocs.com/?post_type=aw2_app&#038;p=866273</guid>
		<description></description>
		<content:encoded><![CDATA[]]></content:encoded>
		<excerpt:encoded><![CDATA[]]></excerpt:encoded>
		<wp:post_id>866273</wp:post_id>
		<wp:post_date><![CDATA[2020-10-15 10:45:41]]></wp:post_date>
		<wp:post_date_gmt><![CDATA[2020-10-15 05:15:41]]></wp:post_date_gmt>
		<wp:post_modified><![CDATA[2020-10-15 10:45:41]]></wp:post_modified>
		<wp:post_modified_gmt><![CDATA[2020-10-15 05:15:41]]></wp:post_modified_gmt>
		<wp:comment_status><![CDATA[closed]]></wp:comment_status>
		<wp:ping_status><![CDATA[closed]]></wp:ping_status>
		<wp:post_name><![CDATA[training]]></wp:post_name>
		<wp:status><![CDATA[publish]]></wp:status>
		<wp:post_parent>0</wp:post_parent>
		<wp:menu_order>0</wp:menu_order>
		<wp:post_type><![CDATA[aw2_app]]></wp:post_type>
		<wp:post_password><![CDATA[]]></wp:post_password>
		<wp:is_sticky>0</wp:is_sticky>
														<wp:postmeta>
		<wp:meta_key><![CDATA[_edit_last]]></wp:meta_key>
		<wp:meta_value><![CDATA[68]]></wp:meta_value>
		</wp:postmeta>
							<wp:postmeta>
		<wp:meta_key><![CDATA[config_collection]]></wp:meta_key>
		<wp:meta_value><![CDATA[c_training]]></wp:meta_value>
		</wp:postmeta>
							<wp:postmeta>
		<wp:meta_key><![CDATA[_config_collection]]></wp:meta_key>
		<wp:meta_value><![CDATA[field_5ac35ca9b9389]]></wp:meta_value>
		</wp:postmeta>
							<wp:postmeta>
		<wp:meta_key><![CDATA[modules_collection]]></wp:meta_key>
		<wp:meta_value><![CDATA[m_training]]></wp:meta_value>
		</wp:postmeta>
							<wp:postmeta>
		<wp:meta_key><![CDATA[_modules_collection]]></wp:meta_key>
		<wp:meta_value><![CDATA[field_5ac35cdb9b852]]></wp:meta_value>
		</wp:postmeta>
							<wp:postmeta>
		<wp:meta_key><![CDATA[pages_collection]]></wp:meta_key>
		<wp:meta_value><![CDATA[]]></wp:meta_value>
		</wp:postmeta>
							<wp:postmeta>
		<wp:meta_key><![CDATA[_pages_collection]]></wp:meta_key>
		<wp:meta_value><![CDATA[field_5ac35cf21a4d5]]></wp:meta_value>
		</wp:postmeta>
							<wp:postmeta>
		<wp:meta_key><![CDATA[posts_collection]]></wp:meta_key>
		<wp:meta_value><![CDATA[]]></wp:meta_value>
		</wp:postmeta>
							<wp:postmeta>
		<wp:meta_key><![CDATA[_posts_collection]]></wp:meta_key>
		<wp:meta_value><![CDATA[field_5ac35d021a4d6]]></wp:meta_value>
		</wp:postmeta>
							<wp:postmeta>
		<wp:meta_key><![CDATA[apphelp_collection]]></wp:meta_key>
		<wp:meta_value><![CDATA[]]></wp:meta_value>
		</wp:postmeta>
							<wp:postmeta>
		<wp:meta_key><![CDATA[_apphelp_collection]]></wp:meta_key>
		<wp:meta_value><![CDATA[field_5ac35d201a4d7]]></wp:meta_value>
		</wp:postmeta>
							<wp:postmeta>
		<wp:meta_key><![CDATA[skip_sitemap]]></wp:meta_key>
		<wp:meta_value><![CDATA[yes]]></wp:meta_value>
		</wp:postmeta>
							<wp:postmeta>
		<wp:meta_key><![CDATA[_skip_sitemap]]></wp:meta_key>
		<wp:meta_value><![CDATA[field_5afa88c560520]]></wp:meta_value>
		</wp:postmeta>
							</item>
					

		<item>
		<title><![CDATA[vertical-training-timeline]]></title>
		<link>https://awxdocs.com/?post_type=training_service&#038;p=866324</link>
		<pubDate>Thu, 15 Oct 2020 05:28:56 +0000</pubDate>
		<dc:creator><![CDATA[abhishek B]]></dc:creator>
		<guid isPermaLink="false">https://awxdocs.com/?post_type=training_service&#038;p=866324</guid>
		<description></description>
		<content:encoded><![CDATA[[templates.add main]

	//** if the DP status is empty the show the error **//
[template.set error]
	<h4 class="brand-danger brand-warning text-center width-100">No current dp status found!!!</h4>
[/template.set]
[template.return template.error empty='{single_data.dp_meta.dp_status}' /]

[css.style]
	.custom-icon {
    height: 18px;
    width: 18px;
    display: inline-block;
    background-color: black;
    color: white;
    font-size: 20px;
    line-height: 15px;
    text-align: center;
  }

  .plus::before {
    content: "+";
  }
  .minus::before {
    content: "-";
  }
  .rating-section ul li{
    position:relative;
  }
  .rating-section ul li::before {
    content: '';
    position: absolute;
    border-bottom: 1px solid;
    width: 7px;
    height: 10px;
    top: 1px;
    left: -15px;
  }
  .icon-star-outline{
    cursor:pointer;
  }
  .notes-textarea{
    resize:none;
    height:125px;
  }
  .textarea-floating{
    height:125px;
  }
  .rate-slide{
    cursor:pointer;
  }
  .training-slide{
    cursor:pointer;
  }
  .brand-warning {
    color: #eabf23;
  }
  .icon-star-outline:hover{
    color: #eabf23;
  }
  .trn-rating{
    border-top: 0 !important;
    border-right: 0 !important;
    border-left: 0 !important;
    border-radius: 0 !important;
    padding-left: 40px;
    outline-style: none;
    box-shadow: none;
  }
  .acontainer h4 {
     font-size: 15px;
  }
  .acontainer h1 span {
     font-weight: 600;
  }
  .active .marker{
     background: #0f959e;
  }

  .acontainer {
     width: 80%;
     padding: 50px 0;
     margin: 50px auto;
     position: relative;
     overflow: hidden;
     padding-bottom: 0;
  }

  .acontainer:before {
     content: '';
     position: absolute;
     top: unset;
     left: 50%;
     margin-left: -1px;
     width: 2px;
     height: 100%;
     background: #CCD1D9;
     z-index: 1
  }

  .timeline-block {
     width: ~"calc(50% + 15px)";
     display: -webkit-box;
     display: flex;
     -webkit-box-pack: justify;
     justify-content: space-between;
     clear: both;
  }

  .timeline-block-right {
     float: right;
  }

  .timeline-block-left {
     float: left;
     margin: 5% 0% 5% -4%;
     text-align:right;
  }

  .marker {
     width: 30px;
     height: 30px;
     border-radius: 50%;
     border: 2px solid #F5F7FA;
     background: #BBC0C1;
     margin-top: -4px;
     z-index: 10;
     text-align: center;
  }

  .timeline-content {
     width: 95%;
     padding: 0 15px;
     color: #666
  }

  .timeline-content h3 {
     margin-top: 0px;
  	 margin-bottom: -5px;
     font-size: 16px;
     font-weight: 500
  }

  .timeline-content span {
     font-size: 15px;
     color: #a4a4a4;
  }

  .timeline-content p {
     font-size: 14px;
     line-height: 1.5em;
     word-spacing: 1px;
     color: #888;
  }
  .j-date{
    position: absolute;
    right: ~"calc(50% + 30px)";
   }
   .d-none{
    display:none;
   }


  @media screen and (max-width: 768px) {
     .acontainer:before {
        left: 14px;
        width: 2px;
     }
     .acontainer {
        width: 90%;
        padding: 25px 0;
		 }
     .timeline-block {
        width: 100%;
        margin-bottom: 30px;
     }
     .timeline-block-right {
        float: none;
     }

     .timeline-block-left {
        float: none;
        text-align:left;
        margin-left: 15px;
     }
     .acontainer h4 {
        font-size: 12px;
      }
     .j-date{
        position: absolute;
        right: ~"calc(0% + -15px)";
        font-size: 11px;
        align-self: center;
     }
     .timeline-content h3 {
        font-size: 12px;
        margin-top: 5px;
     }
  }
[/css.style]

//** fetch active training modules **//
[query.get_results set=template.active_training]
  select * from training_meta where coll_type='training'
  and meta_key='training_status' and meta_value='Active' limit 1
[/query.get_results]
[training.get.moduleMetaKeys object_id={template.active_training.0.object_id} set=template.modules /]

<div class="row align-items-center brand-seventh-bg is-flex no-margin pad-y-6 pad-x-2 training-slide box-shadow">
  <div class="col-12 is-flex justify-content-between">
    <dv>
    	<h3 class="font-size-large font-bold">
      	DP Training Journey
        [if.equal lhs={single_data.dp_meta.dp_state} rhs="DC Ready"]
        [/if.equal]
        [if.or cond={single_data.dp_meta.dp_state} equal='Active']
          | <small><a href="[aw2.get url.site/]training/assessment/[aw2.get qs.0/]" target="_blank" rel="noopener noreferrer">View Assessment</a></small>
        [/if.or]
      </h3>
    </dv>
    //** loading days count from  http://dc.wordpoets.com/wp-admin/post.php?post=874579&action=edit **//
  	<div>
    	<span class='ttl-j-days'>Total Days: 0</span>
    	<i class="custom-icon plus" style="margin-left:15px;"></i> 
    </div>
  </div>
</div>
//** Vertical Training Timeline **//
<div class="acontainer training-content" style='display: none;'>
  [template.set is_empty=''/]
  [template.set final_complete_at=''/]
  [loop.@i template.modules] 
    [training.get.userTraining object_id="{aw2.get @i.item.object_id}"  dp_id="{aw2.get qs.0}" set=template.single/]
    [template.get single.module_completed_at set="template.time_arr.{@i.index}" /]
    [if.true @i.first] [template.set is_empty='{template.single.module_completed_at}'/] [/if.true]
    [if.true @i.last] [template.set final_complete_at='{template.single.module_completed_at}'/] [/if.true] 
  [/loop.@i]
	//**
  commented as admin can mark training as completed from partner page.
  [if.empty template.is_empty]
    [template.set msg]
      <div class="is-flex justify-content-center col-12">
      <p class='text-center brand-danger mar-t-5'>Training Journey Not Started</p>  
      </div>
    [/template.set]
    [template.return template.msg /]
  [/if.empty]
	**//
  [if.contains haystack='email-id-created,updated-my-profile,updated-my-bank-details' needle='{single_data.dp_meta.dp_status}']
    [template.set msg]
      <div class="is-flex justify-content-center col-12">
      <p class='text-center brand-dark mar-t-5'>Training Journey is Visible here when Partner Completes <b>Signed Agreement</b> Stage</p>  
      </div>
    [/template.set]
    [template.return template.msg /]
  [/if.contains]
  
  [this_collection.create_ticket.generate 
    mod='store_submission'
    tpl='markTrainingComplete'
    set=template.ticket
  /]
  [template.set first_started_at=''/]
  [template.set final_complete_at=''/]
  [loop.@i template.modules] 
      [training.get.userTraining object_id="{aw2.get @i.item.object_id}" dp_id="{aw2.get qs.0}" set=template.single/]
      [if.true @i.first] [template.set first_started_at='{template.single.module_completed_at}'/] [/if.true] 
      [if.true @i.last] [template.set final_complete_at='{template.single.module_completed_at}'/] [/if.true] 
  [/loop.@i]
  
  [templates.injectModule title='Training Started' completed_at={template.first_started_at}/]
  
  [loop.@i template.modules] 
      [training.get.userTraining object_id="{aw2.get @i.item.object_id}" dp_id="{aw2.get qs.0}" set=template.single/]

      [template.set math_term="{@i.index}+1" /]
      [template.get math_term.math set=template.indexKey /]

      [template.get time_arr.{template.indexKey} set="template.next_date"/]
      [template.get time_arr.{@i.index} set="template.curr_date"/]
       <div class="timeline-block timeline-block-right [if.equal lhs='{template.single.module_status}' rhs='completed'] active[/if.equal]">
       		<span class='j-date'>[template.single.module_completed_at date_format='d-M-y'/]</span>
          <div class="marker">
          	[if.empty template.final_complete_at]
              <a href="#" 
                bind="click"
                axn="route.run"
                route_ajax="t/[template.ticket/]"
                action_slug="[template.single.action_type/]" 
                module_object_id="[aw2.get @i.item.object_id]"
                dp_id="[aw2.get qs.0]" >
                <i class="font-size-larger icon-check brand-white"></i>
              </a>
            [/if.empty]
            [if.else]
            	<i class="font-size-larger icon-check brand-white"></i>
            [/if.else]
          </div>
          
          <div class="timeline-content">
             <h3>[aw2.get @i.item.module_title /]</h3>
          </div>
       </div>
       [if.not_empty template.curr_date]
       	[templates.findDays curr_date={template.curr_date} next_date={template.next_date} set='template.days'/]
       [/if.not_empty]
       //** removing as last will be dc ready [if.true @i.last]d-none[/if.true] **//
       <div class="timeline-block timeline-block-left">
          <div class=""></div>
          <div class="timeline-content">
             <h4 class="days-count">
                 [if.equal lhs='{template.days}' rhs='1']
                    [template.set adj='day']
                [/if.equal]
                [if.else] 
                  [template.set adj='days']
                [/if.else]

                [if.equal lhs='{template.days}' rhs='0']
                    Within a day
                [/if.equal]

                [if.not_equal lhs='{template.days}' rhs='']
                    [aw2.get template.days/] [template.adj /]
                    <span class='count-days' style='display:none;'>[aw2.get template.days/]</span>
                [/if.not_equal]
             </h4>
          </div>
       </div>
    [/loop.@i]
  
  //** make final_completed_at empty to avoid making dc ready timeline active **//
  [if.not_equal lhs={single_data.dp_meta.dp_state} rhs='DC Ready']
  [/if.not_equal]
  [if.and cond={single_data.dp_meta.dp_state} not_equal='Active']
   [template.set final_complete_at=''/]
  [/if.and]
  [templates.injectModule title='DC Ready' completed_at={template.final_complete_at} is_last=true/]
</div>

<script type="spa/axn" axn="core.run_script">
	var total = 0;
	$(".count-days").each(function() {
      total += parseInt($(this).text());
      $('.ttl-j-days').html(`Total Days: <b>${total}</b>`);
  });
</script>
<script type="spa/axn" axn="core.run_script">
  $(".training-slide").click(function(){
      $(this).next('.training-content').slideToggle('2000');
      $(this).find('.custom-icon').toggleClass("plus minus");
      if($(this).find('.custom-icon').hasClass('minus')){
      	$('html, body').animate({
          scrollTop: $(this).next(".training-content").offset().top
      	}, 2000);
      }
  });
</script>
[/templates.add]

[templates.add findDays]
  //**
  [php.strtotime p1='{template.next_date}' set='template.next_date'/]
  **//
  [if.not_empty template.next_date]
    [php.strtotime p1='{template.next_date}' set='template.next_date'/]
    [php.strtotime p1='{template.curr_date}' set='template.curr_date'/]

    [aw2.set result="{template.next_date}-{template.curr_date}" /]
		
    [aw2.set answer="{result.math}/86400" /] //** 60 * 60 * 24 **//
    [php.round p1={answer.math} set='template.days'/]
    [template.return template.days /]
  [/if.not_empty]
[/templates.add]

[templates.add injectModule]
	<div class="timeline-block timeline-block-right [if.not_empty template.completed_at]active[/if.not_empty]">
      <span class='j-date'>[template.completed_at date_format='d-M-y'/]</span>
      <div class="marker">
        <i class="font-size-larger icon-check brand-white"></i>
      </div>
      <div class="timeline-content">
         <h3><b>[template.title /]</b>
          [if.true template.is_last][/if.true]
          [if.and cond={template.completed_at} not_equal='']
            <a href="[aw2.get url.site/]training/assessment/[aw2.get qs.0/]" target="_blank" rel="noopener noreferrer">View Assessment</a>
          [/if.and]
         </h3>
      </div>
   </div>
   <div class="timeline-block timeline-block-left [if.true template.is_last]d-none[/if.true]">
      <div class=""></div>
      <div class="timeline-content"></div>
   </div>
[/templates.add]]]></content:encoded>
		<excerpt:encoded><![CDATA[]]></excerpt:encoded>
		<wp:post_id>866324</wp:post_id>
		<wp:post_date><![CDATA[2020-10-15 10:58:56]]></wp:post_date>
		<wp:post_date_gmt><![CDATA[2020-10-15 05:28:56]]></wp:post_date_gmt>
		<wp:post_modified><![CDATA[2020-10-15 10:58:56]]></wp:post_modified>
		<wp:post_modified_gmt><![CDATA[2020-10-15 05:28:56]]></wp:post_modified_gmt>
		<wp:comment_status><![CDATA[closed]]></wp:comment_status>
		<wp:ping_status><![CDATA[closed]]></wp:ping_status>
		<wp:post_name><![CDATA[vertical-training-timeline]]></wp:post_name>
		<wp:status><![CDATA[publish]]></wp:status>
		<wp:post_parent>0</wp:post_parent>
		<wp:menu_order>0</wp:menu_order>
		<wp:post_type><![CDATA[training_service]]></wp:post_type>
		<wp:post_password><![CDATA[]]></wp:post_password>
		<wp:is_sticky>0</wp:is_sticky>
														<wp:postmeta>
		<wp:meta_key><![CDATA[_edit_last]]></wp:meta_key>
		<wp:meta_value><![CDATA[68]]></wp:meta_value>
		</wp:postmeta>
							</item>
					<item>
		<title><![CDATA[activities]]></title>
		<link>https://awxdocs.com/?post_type=training_service&#038;p=866326</link>
		<pubDate>Thu, 15 Oct 2020 05:29:09 +0000</pubDate>
		<dc:creator><![CDATA[abhishek B]]></dc:creator>
		<guid isPermaLink="false">https://awxdocs.com/?post_type=training_service&#038;p=866326</guid>
		<description></description>
		<content:encoded><![CDATA[[templates.add rate_training]

    [loop.@meta template.meta]
      [template.set_array meta_arr.new meta_key="{@meta.item.meta_key}" meta_value="{@meta.item.meta_value}" /] 
    [/loop.@meta]
    
    [db.meta.update_coll_meta 
      object_id="{template.object_id}"
      meta_table="training_meta"
      meta="{template.meta_arr}"
      coll_id="{template.dp_id}"
      coll_type="training_submission" 
    /]
    
    [template.set ack=""/]
    [template.set_array ack status="success" int_reason="rating updated!" reason="training module rating updated!"/]
    [template.return template.ack /]
    
[/templates.add]]]></content:encoded>
		<excerpt:encoded><![CDATA[]]></excerpt:encoded>
		<wp:post_id>866326</wp:post_id>
		<wp:post_date><![CDATA[2020-10-15 10:59:09]]></wp:post_date>
		<wp:post_date_gmt><![CDATA[2020-10-15 05:29:09]]></wp:post_date_gmt>
		<wp:post_modified><![CDATA[2020-10-15 10:59:09]]></wp:post_modified>
		<wp:post_modified_gmt><![CDATA[2020-10-15 05:29:09]]></wp:post_modified_gmt>
		<wp:comment_status><![CDATA[closed]]></wp:comment_status>
		<wp:ping_status><![CDATA[closed]]></wp:ping_status>
		<wp:post_name><![CDATA[activities]]></wp:post_name>
		<wp:status><![CDATA[publish]]></wp:status>
		<wp:post_parent>0</wp:post_parent>
		<wp:menu_order>0</wp:menu_order>
		<wp:post_type><![CDATA[training_service]]></wp:post_type>
		<wp:post_password><![CDATA[]]></wp:post_password>
		<wp:is_sticky>0</wp:is_sticky>
														<wp:postmeta>
		<wp:meta_key><![CDATA[_edit_last]]></wp:meta_key>
		<wp:meta_value><![CDATA[68]]></wp:meta_value>
		</wp:postmeta>
							</item>
					<item>
		<title><![CDATA[css]]></title>
		<link>https://awxdocs.com/?post_type=training_service&#038;p=866328</link>
		<pubDate>Thu, 15 Oct 2020 05:29:24 +0000</pubDate>
		<dc:creator><![CDATA[abhishek B]]></dc:creator>
		<guid isPermaLink="false">https://awxdocs.com/?post_type=training_service&#038;p=866328</guid>
		<description></description>
		<content:encoded><![CDATA[[css.style]
  .module-time{
    input{
      border-radius:5px 0 0 5px !important
    }
    select{
      border-radius:0 5px 5px 0 !important
    }
  }
  .text-danger{
    color:red;
  }
  .group-title{
    text-align:center;
  }
  .active-card {
      border: 2px solid #008b8b4f !important;
  }
  .d-none {
    display:none !important;
  }
  .panel{
    .card {
      background: white;
      padding: 25px;
      border-radius: 10px;
    }
    .shadow {
      box-shadow: 0 1px 3px rgba(0,0,0,0.12), 0 1px 2px rgba(0,0,0,0.24);
      transition: all 0.3s cubic-bezier(.25,.8,.25,1);
    }
  }
  .dc-offering{ 
      .checkbox{
        transform: scale(1.4);
        width: 30px;
        margin-right: 15px;
      }
      label.tab{
        padding-left: 25px;
        padding-right: 40px;
        cursor: pointer;
        border: 2px solid transparent;
        &.disabled{
            opacity: 0.5;
            pointer-events: none;
        }

        .radio-checkmark{
              width: 23px;
              height: 23px;
              padding: 0 4px;
              position: absolute;
              top: 15px;
              right: 15px;
              color: @gray-light;
              border-radius: 5px;
              i{
                  opacity:0;
                  font-weight: bold;
              }

          }
          &.active{
              background: rgba(17,166,176,0.12);
              .radio-checkmark{
                  color: @brand-success;
                  i{
                      opacity:2;
                  }
              }
          }
      }
    .floating-label>label {
        position: absolute;
        top: 0;
        display: block;
        width: auto;
        margin-top: 0;
        margin-bottom: 0;
        line-height: 1.5;
        color: rgba(0,0,0,.85);
        border: 1px solid transparent;
        border-radius: .25rem;
        transition: all 0.1s ease-in-out;
        padding: .9rem;
        font-weight: 400;
    }
    .toggle .panels .panel{
        display:none;
    }
    .toggle .tabs .tab {
      cursor: pointer;
    }
  }
[/css.style]
[css.style]
  .form-group
    {
        margin-bottom: 15px;
        position: relative;
        padding-left: 15px;
        padding-right: 15px;

        .form-control {
            padding: 0.9rem;
            font-size: 16px;
        }    

        .help-block{
          margin-bottom: 0;
          margin-top: 5px;
          font-size: 11px;
        }

        input:-webkit-autofill,
        input:-webkit-autofill:hover, 
        input:-webkit-autofill:focus,
        textarea:-webkit-autofill,
        textarea:-webkit-autofill:hover,
        textarea:-webkit-autofill:focus,
        select:-webkit-autofill,
        select:-webkit-autofill:hover,
        select:-webkit-autofill:focus {
            transition: background-color 5000s ease-in-out 0s;
        }
    }
    .float-label {
        .field-wrapper{
            position:relative;
            background: #fff;
            border-radius: 5px;
            input[type=text],input[type=email],textarea {
                position: relative;
                z-index: 1;
                background: transparent !important;
                &::-webkit-input-placeholder {
                    color: transparent;
                }
                &::-moz-placeholder {
                    color: transparent;
                }
                &::placeholder {
                    color: transparent;
                }
                &:not(:placeholder-shown) {
                    padding-top: 1.25rem;
                    padding-bottom: 0.55rem;
                    ~ label {
                            padding-top: ~"calc(.75rem / 3)";
                            padding-bottom: ~"calc(.75rem / 3)";
                            font-size: 12px;
                            white-space: nowrap;
                            color: @gray-light;
                        }

                }
                &:-ms-input-placeholder {
                    color: @gray-dark !important;
                }
            }
            >label {
                position: absolute;
                top: 0;
                display: block;
                width: auto;
                margin-top:0;
                margin-bottom: 0;
                line-height: 1.5;
                color: @gray-dark;
                border: 1px solid transparent;
                border-radius: .25rem;
                transition: all .1s ease-in-out;
                padding: 0.9rem;
                font-weight: 400;
                overflow: hidden;
                text-overflow: ellipsis;
                white-space: nowrap;
            }
            select{
              z-index: 1;
              background: transparent;
              &~ label{
                opacity: 0;
              }
            }
            &.selected{
              select{
                  padding-top: 1.25rem;
                  padding-bottom: .55rem;
                  &~ label{
                      opacity: 1;
                      padding-top: calc(.75rem / 3);
                      padding-bottom: calc(.75rem / 3);
                      font-size: 12px;
                      color: rgba(0,0,0,.3);
                  }
              }
            }
        }
    }
[/css.style]]]></content:encoded>
		<excerpt:encoded><![CDATA[]]></excerpt:encoded>
		<wp:post_id>866328</wp:post_id>
		<wp:post_date><![CDATA[2020-10-15 10:59:24]]></wp:post_date>
		<wp:post_date_gmt><![CDATA[2020-10-15 05:29:24]]></wp:post_date_gmt>
		<wp:post_modified><![CDATA[2020-10-15 10:59:25]]></wp:post_modified>
		<wp:post_modified_gmt><![CDATA[2020-10-15 05:29:25]]></wp:post_modified_gmt>
		<wp:comment_status><![CDATA[closed]]></wp:comment_status>
		<wp:ping_status><![CDATA[closed]]></wp:ping_status>
		<wp:post_name><![CDATA[css]]></wp:post_name>
		<wp:status><![CDATA[publish]]></wp:status>
		<wp:post_parent>0</wp:post_parent>
		<wp:menu_order>0</wp:menu_order>
		<wp:post_type><![CDATA[training_service]]></wp:post_type>
		<wp:post_password><![CDATA[]]></wp:post_password>
		<wp:is_sticky>0</wp:is_sticky>
														<wp:postmeta>
		<wp:meta_key><![CDATA[_edit_last]]></wp:meta_key>
		<wp:meta_value><![CDATA[68]]></wp:meta_value>
		</wp:postmeta>
							</item>
					<item>
		<title><![CDATA[get]]></title>
		<link>https://awxdocs.com/?post_type=training_service&#038;p=866330</link>
		<pubDate>Thu, 15 Oct 2020 05:29:38 +0000</pubDate>
		<dc:creator><![CDATA[abhishek B]]></dc:creator>
		<guid isPermaLink="false">https://awxdocs.com/?post_type=training_service&#038;p=866330</guid>
		<description></description>
		<content:encoded><![CDATA[[templates.add metaKeys]

	[query.get_results set=template.training]
    select * from training_meta where object_id='[template.object_id/]' and coll_type='[template.coll_type default="training_sub"/]'
  [/query.get_results]  
  
  //**get key val**//
  [loop.@meta template.training]
  	[aw2.get @meta.item.meta_value set="template.arr.{@meta.item.meta_key}" /]
  [/loop.@meta]
  
  [template.return template.arr /]
  
[/templates.add]

[templates.add moduleMetaKeys]
  [if.equal lhs='{template.is_desc}' rhs='yes']
    [query.get_results set=template.training]
      SELECT * FROM training_meta t1 JOIN training_meta t2 USING (object_id)
      WHERE t1.coll_id='[template.object_id/]' AND t1.coll_type='[template.coll_type default="training_sub"/]' 
      AND t1.meta_key='order_key' ORDER BY CAST(t1.meta_value AS unsigned) desc
    [/query.get_results]  
  [/if.equal] 
  [if.else]
  	[query.get_results set=template.training]
      SELECT * FROM training_meta t1 JOIN training_meta t2 USING (object_id)
      WHERE t1.coll_id='[template.object_id/]' AND t1.coll_type='[template.coll_type default="training_sub"/]' 
      AND t1.meta_key='order_key' ORDER BY CAST(t1.meta_value AS unsigned) ASC
    [/query.get_results]
  [/if.else]
  //**
  SELECT * FROM training_meta t1 JOIN training_meta t2 USING (object_id)
  WHERE t1.coll_id='[template.object_id/]' AND t1.coll_type='[template.coll_type default="training_sub"/]' 
  AND t1.meta_key='order_key' ORDER BY CAST(t1.meta_value AS unsigned) ASC
  **//
  //**get key val with index obj id **//
  [loop.@meta template.training]
    [aw2.get @meta.item.meta_value set="template.args.{@meta.item.object_id}.{@meta.item.meta_key}" /]
  [/loop.@meta]
  [template.return template.args /]
  
[/templates.add]

[templates.add userTraining]
		
    [if.empty template.dp_id]
    	[vsession.get dp_id set=template.dp_id /]
    [/if.empty]
    
    [query.get_results set=template.res]
      select * from training_meta where coll_id='[template.dp_id /]'
      and coll_type='training_submission' 
      and meta_key='parent_object_id' and meta_value='[template.object_id]'
    [/query.get_results]  
    
    [training.get.metaKeys object_id={template.res.0.object_id} coll_type='training_submission' set=template.single /]
    [template.return template.single /]
   
[/templates.add]

[templates.add dp_meta]
	[db.meta.select_object_meta
    object_id="{template.dp_id}"
    meta_table="dp_meta"
    meta_keys='{template.meta_keys}'
    coll_id='{template.coll_id default=dp}'
    set=template.rs /]
  [template.return template.rs.{template.meta_keys} /]
[/templates.add]

[templates.add activeTrainingModules]

	[query.get_results set=template.active_training]
    select * from training_meta where coll_type='training'
    and meta_key='training_status' and meta_value='Active' limit 1
  [/query.get_results]
	[training.get.moduleMetaKeys object_id={template.active_training.0.object_id} set=template.modules /]
  
  [template.return template.modules/]
[/templates.add]]]></content:encoded>
		<excerpt:encoded><![CDATA[]]></excerpt:encoded>
		<wp:post_id>866330</wp:post_id>
		<wp:post_date><![CDATA[2020-10-15 10:59:38]]></wp:post_date>
		<wp:post_date_gmt><![CDATA[2020-10-15 05:29:38]]></wp:post_date_gmt>
		<wp:post_modified><![CDATA[2020-10-15 10:59:38]]></wp:post_modified>
		<wp:post_modified_gmt><![CDATA[2020-10-15 05:29:38]]></wp:post_modified_gmt>
		<wp:comment_status><![CDATA[closed]]></wp:comment_status>
		<wp:ping_status><![CDATA[closed]]></wp:ping_status>
		<wp:post_name><![CDATA[get]]></wp:post_name>
		<wp:status><![CDATA[publish]]></wp:status>
		<wp:post_parent>0</wp:post_parent>
		<wp:menu_order>0</wp:menu_order>
		<wp:post_type><![CDATA[training_service]]></wp:post_type>
		<wp:post_password><![CDATA[]]></wp:post_password>
		<wp:is_sticky>0</wp:is_sticky>
														<wp:postmeta>
		<wp:meta_key><![CDATA[_edit_last]]></wp:meta_key>
		<wp:meta_value><![CDATA[68]]></wp:meta_value>
		</wp:postmeta>
							</item>
					<item>
		<title><![CDATA[store_submission]]></title>
		<link>https://awxdocs.com/?post_type=training_service&#038;p=866332</link>
		<pubDate>Thu, 15 Oct 2020 05:30:00 +0000</pubDate>
		<dc:creator><![CDATA[abhishek B]]></dc:creator>
		<guid isPermaLink="false">https://awxdocs.com/?post_type=training_service&#038;p=866332</guid>
		<description></description>
		<content:encoded><![CDATA[//** prepare meta keys, store and redirect to take test screen **//
[templates.add createMeta]
		
		[template.set object_id="TRS{unique_number}" /] 
    [module.set single_data.request={request} /]
    [module.set single_data.form_config={template.form_config.json_decode} /]
    [module.set single_data.form_type={template.form_type} /]
    [templates.createRequestMeta single_data="{module.single_data}" set="template.rtn" /]
    [templates.defaultMeta request={request} object_id={template.object_id} meta={template.rtn} set=template.meta /]
    
    [vsession.get dp_id set=template.dp_id /]
    [training.get.metaKeys object_id={request.module_object_id} set=template.module /] 
    
    //** Store Logic Start Here  **// 
      [db.meta.insert_coll_meta 
        object_id="{template.object_id}"
        meta_table="training_meta"
        meta="{template.meta}"
        coll_id="{template.dp_id}"
        coll_type='training_submission' 
      /]
      
    //** Store Logic Ends Here **//
    
    //** sending email notification to admin and dp user **//
    [if.equal lhs="{template.module.action_slug}" rhs="submit-request"]
      [templates.requestNotification data={request} single_module={template.module} admin_email='{settings.admin_email}' email_template="admin-training-request" /]
      [templates.requestNotification data={request} single_module={template.module} email_template="dp-training-request" /]
   	[/if.equal]
    
    <template axn="selector.replace" selector=".render-[request.module_object_id/]" get="me.html">
      	//**[form.module_actions.take-test data={template.module}/]**//
        <script>
           location.reload(true);
        </script>
    </template>
[/templates.add]

//** get metas for request from fields config **//
[templates.add createRequestMeta]
    [this_collection.fields_config /]
    [template.set groups={template.single_data.form_config.groups} /]
    [arr.create set=template.meta][/arr.create]
    [loop.@gr template.groups]
        [loop.@field @gr.item.field]
						//** prepare the files fileds **//
            [aw2.get @field.item set='module.file_uploads.{@field.key}' c.cond='@field.item.type' c.eq='s:file_upload' /]
            [template.get single_data.request.{@field.key} set=template.value /] 
            [if.not_equal lhs="{@field.item.type}" rhs="file_upload"]
              	[template.set_array meta.new meta_key={@field.key} meta_value={template.value} c.cond="@field.item.edit" c.eq="s:yes" /]
            [/if.not_equal]

        [/loop.@field]
    [/loop.@gr]
    
    [if.not_empty module.file_uploads]
    		[templates.uploadFiles file_uploads={module.file_uploads} meta={template.meta} set="template.new_meta"/]
        [template.return template.new_meta /] 
    [/if.not_empty]
    [template.return template.meta /] 
[/templates.add]

//** upload multiple files from field config and return path urls **//
[templates.add uploadFiles]
	[loop.@file template.file_uploads]
      [aw2.upload attach_to_post
        upload_element_id='{@file.key}'
        allowed_file_types='zip,pdf,rar,doc,jpg,jpeg,png,gif,txt,mp3,mp4,flv,mov,avi'
        file_name='{@file.key}'
        overwrite_file='no'
        set_featured="true"
        set='template.file_response'
      /]
      [if.not_empty template.file_response]
          [php.wp_get_attachment_url p1="{template.file_response}" set=template.file_url /]
      [/if.not_empty]
      [template.set_array meta.new meta_key="{@file.key}" meta_value="{template.file_url}"/] 
  [/loop.@file]
  
	[template.return template.meta /] 
[/templates.add]

//**Create a default and common meta for tranining_submission **//
[templates.add defaultMeta]
	
	[date.create now date_format='Y-m-d H:i:s' set=template.dt /]
  [php.strtotime p1="{template.dt}" set=template.epoch /]
	[training.get.metaKeys object_id={template.request.module_object_id} set=template.module /]
  
	[aw2.get app.dp_meta set="template.user"/] 
  [vsession.get dp_id set=template.dp_id /]
  
  [module.set_array default_meta.new meta_key="object_id" meta_value="{template.object_id}"/]
  [module.set_array default_meta.new meta_key="dp_id" meta_value="{template.dp_id}"/]
  [module.set_array default_meta.new meta_key='module_status' meta_value='in-process' /] 
  [module.set_array default_meta.new meta_key='action_type' meta_value='{template.module.action_slug}' /]
  [module.set_array default_meta.new meta_key='parent_object_id' meta_value='{template.request.module_object_id}' /] 
  [module.set_array default_meta.new meta_key='test_status' meta_value='{template.test_status}' /] 
  [module.set_array default_meta.new meta_key='created_datetime' meta_value='{template.dt}' /]
  [module.set_array default_meta.new meta_key='created_epoch' meta_value='{template.epoch}' /] 
  [module.set_array default_meta.new meta_key='created_by' meta_value='{template.user.email}' /]
  [module.set_array default_meta.new meta_key="module_completed_at" meta_value=""/]
  
  [php.array_merge p1='{module.default_meta}' p2='{template.meta}' set='template.meta' /]
	
  [template.return template.meta /]
  
[/templates.add]

//** When user mark test as completed call this template **//
[templates.add submitTestComplete]
	//**[aw2.get request.module_object_id o.exit=1 /]**//
	
	[date.create now date_format='Y-m-d H:i:s' set=template.dt /]
  
  [training.get.userTraining object_id="{request.module_object_id}" set=template.single/]
  [training.get.metaKeys object_id="{request.module_object_id}" set=template.module/]
	[vsession.get dp_id set=template.dp_id /]
  
  [template.set_array meta.new meta_key="test_status" meta_value="completed"/] 
  [template.set_array meta.new meta_key="module_status" meta_value="completed"/] 
  [template.set_array meta.new meta_key="module_completed_at" meta_value="{template.dt}"/] 
  [aw2.upload attach_to_post
    upload_element_id='mockup_url'
    allowed_file_types='zip,pdf,rar,doc,jpg,jpeg,png,gif,txt,mp3,mp4,flv,mov,avi'
    file_name='mockup_url'
    overwrite_file='no'
    set_featured="true"
    set='template.file_response'
  /]
  [if.not_empty template.file_response]
      [php.wp_get_attachment_url p1="{template.file_response}" set=template.file_url /]
      [template.set_array meta.new meta_key="mockup_url" meta_value="{template.file_url}"/]
  [/if.not_empty]
	[db.meta.update_coll_meta 
    object_id="{template.single.object_id}"
    meta_table="training_meta"
    meta="{template.meta}"
    coll_id="{template.dp_id}"
    coll_type="training_submission" 
  /]
  //** send notification to admin about test completion **//
  [template.set email_template="admin-training-complete-generic" /]
  
  //** if its last module send final notification email and update dp user status **//
  [if.equal lhs='{request.is_last}' rhs='yes']
  	[template.set email_template="admin-training-final-complete" /]
    
    //**update dp user status on final training completion **//
    //** commenting as training will be mark completed by admin on training assesment page as dc ready.
    [template.set_array dpmeta.new meta_key='training_completed' meta_value='yes' /]
    [template.set_array dpmeta.new meta_key="dp_status" meta_value="completed-lead-software-training" /]
    [dp.update meta='{template.dpmeta}' dp_id='{template.dp_id}' /]
    **//
  [/if.equal]
  
  [templates.trainingCompleteNotification single_module={template.module} single_module={template.module} email_template="{template.email_template}" admin_email='yes'  /]
  [templates.trainingCompleteNotification single_module={template.module} single_module={template.module} email_template="dp-training-complete-generic" /]
  
  <template axn="selector.replace" selector=".render-test-[request.module_object_id/]" get="me.html">
    <div class="row justify-content-center text-center">  
      <div class="col-md-12">
        <span class="">
          <div class="alert alert-success" role="alert">
            Training Module Completed Successfully
          </div>
          [if.equal lhs='{request.is_last}' rhs='yes']
          	<h4>Hold on ! Redirecting to Dashboard...</h4>
            <script>
            		spa.manage_api.alert({message:'Your Training Completed!' , type:'success'});
                setTimeout(function(){ window.location = "[aw2.get url.site/]dashboard"; }, 3000);
            </script>
          [/if.equal]
          [if.else]
          	<h4>Hold on ! Refereshing page...</h4>
            <script>
               setTimeout(function(){location.reload();}, 3000);
            </script>
          [/if.else]
        </span>
      </div>
    </div>
    
  </template>
[/templates.add]

//** submit request training notification **//
[templates.add requestNotification]
		
		[aw2.get app.dp_meta set="template.user"/]
		[if.not_empty template.admin_email]
      [template.set_array email]
        [from name='{settings.from_email_name}' email_id='{settings.from_email}' /]
        [to email_id='{template.admin_email}' /]
      [/template.set_array]
    [/if.not_empty]
    [if.else]
      [template.set_array email]
        [from name='{settings.from_email_name}' email_id='{settings.from_email}' /]
        [to email_id='{template.user.email}' /]
      [/template.set_array]
    [/if.else]
   
    [do.notify_data]
    	[aw2.set notify_data.module_title='{template.single_module.module_title}' /]
      [aw2.set notify_data.dp_name='{template.data.dp_name}' /]
      [aw2.set notify_data.city='{template.data.dp_city}' /]
      [aw2.set notify_data.email='{template.data.dp_email}' /]	
      [aw2.set notify_data.phone='{template.data.dp_phone}' /]	
      [aw2.set notify_data.tentative_date='{template.data.tentative_date}' /]	 
      [aw2.set notify_data.time_slot='{template.data.tentative_time_slot}' /]	
      
      [notification_service.send email="{template.email}" log="yes" template_slug="{template.email_template}" email_layout='common_layout' set='module.returnval' /]
    [/do.notify_data]
[/templates.add]

//** training completion notification **//
[templates.add trainingCompleteNotification]
		
		[aw2.get app.dp_meta set="template.user"/]
		[if.not_empty template.admin_email]
    	
    	[aw2.switch]
   	 		[aw2.case cond="{template.user.city}" equal="banglore"]
        	[template.set email_cc='{settings.banglore_email}' /]
        [/aw2.case]
        [aw2.case cond="{template.user.city}" equal="mumbai"]
        	[template.set email_cc='{settings.mumbai_email}' /]
        [/aw2.case]
        [aw2.case cond="{template.user.city}" equal="hyderabad"]
        	[template.set email_cc='{settings.hyderabad_email}' /]
        [/aw2.case]
        [aw2.case_else]
        	[template.set email_cc='{settings.banglore_email}' /]
        [/aw2.case_else]
      [/aw2.switch]
      
      [template.set_array email]
        [from name='{settings.from_email_name}' email_id='{settings.from_email}' /]
        [to email_id='{settings.common_training_email}' /]
        [cc email_id='{template.email_cc}' /]
      [/template.set_array]
    [/if.not_empty]
    [if.else]
      [template.set_array email]
        [from name='{settings.from_email_name}' email_id='{settings.from_email}' /]
        [to email_id='{template.user.email}' /]
      [/template.set_array]
    [/if.else]
   
    [do.notify_data]
      //**[php.explode p1=" " p2="{template.user.name}" set="template.name"/]
      [aw2.set notify_data.dp_name='{template.name.0}' /]**//
      [aw2.set notify_data.dp_name='{template.user.name}' /]
      [aw2.set notify_data.dp_id='{template.user.dp_id}' /]
      [aw2.set notify_data.city_name='{template.user.city}' /]
      [if.equal lhs={template.user.city} rhs='others']
      	[aw2.set notify_data.city_name='{template.user.city_location}' /]
      [/if.equal]
      [aw2.set notify_data.admin_name='Admin' /]
      [aw2.set notify_data.module_title='{template.single_module.module_title}' /]
      [notification_service.send email="{template.email}" log="yes" template_slug="{template.email_template}" email_layout='common_layout' set='module.returnval' /]
    [/do.notify_data]
[/templates.add]

//** when admin marks training as completed manually on partner page **//
[templates.add markTrainingComplete]
  [date.create now date_format='Y-m-d H:i:s' set=template.dt /]
  [php.strtotime p1="{template.dt}" set=template.epoch /]
  [dp.get_meta dp_id={request.dp_id} set=template.user/]
  [template.set object_id="TRS{unique_number}" /]  
  
  [aw2.switch]
      [aw2.case cond='{request.action_slug}' equal='submit-request']
         [template.set_array default_meta.new meta_key="name" meta_value="{template.user.name}"/]
         [template.set_array default_meta.new meta_key="city" meta_value="{template.user.city}"/] 
         [template.set_array default_meta.new meta_key="email" meta_value="{template.user.email}"/]
         [template.set_array default_meta.new meta_key="phone" meta_value="{template.user.phone}"/] 
         [template.set_array default_meta.new meta_key="tentative_date" meta_value=" "/]
         [template.set_array default_meta.new meta_key="tentative_time_slot" meta_value=" "/]
      [/aw2.case]
      [aw2.case cond='{request.action_slug}' equal='watch-demo-upload-material']
        [template.set_array default_meta.new meta_key="mockup_url" meta_value=" "/]
      [/aw2.case]
  [/aw2.switch]
  
  [template.set_array default_meta.new meta_key="object_id" meta_value="{template.object_id}"/]
  [template.set_array default_meta.new meta_key="dp_id" meta_value="{template.user.dp_id}"/]
  [template.set_array default_meta.new meta_key='module_status' meta_value='completed' /] 
  [template.set_array default_meta.new meta_key='action_type' meta_value='{request.action_slug}' /]
  [template.set_array default_meta.new meta_key='parent_object_id' meta_value='{request.module_object_id}' /] 
  [template.set_array default_meta.new meta_key='test_status' meta_value='completed' /] 
  [template.set_array default_meta.new meta_key='created_datetime' meta_value='{template.dt}' /]
  [template.set_array default_meta.new meta_key='created_epoch' meta_value='{template.epoch}' /] 
  [template.set_array default_meta.new meta_key='created_by' meta_value='{template.user.email}' /]
  [template.set_array default_meta.new meta_key="module_completed_at" meta_value="{template.dt}"/]
  
  [db.meta.insert_coll_meta 
    object_id="{template.object_id}"
    meta_table="training_meta"
    meta="{template.default_meta}"
    coll_id="{template.user.dp_id}"
    coll_type='training_submission' 
  /]
  <script type="spa/axn" axn="core.run_script">
       //setTimeout(function(){
       		spa.manage_api.alert({message:'Successfull! Training Module Updated' , type:'success'});
       		spa.manage_api.single_refresh().then(function(){
            $('.training-slide').click();
          });
       //}, 3000);
  </script>
[/templates.add]]]></content:encoded>
		<excerpt:encoded><![CDATA[]]></excerpt:encoded>
		<wp:post_id>866332</wp:post_id>
		<wp:post_date><![CDATA[2020-10-15 11:00:00]]></wp:post_date>
		<wp:post_date_gmt><![CDATA[2020-10-15 05:30:00]]></wp:post_date_gmt>
		<wp:post_modified><![CDATA[2020-10-20 14:42:43]]></wp:post_modified>
		<wp:post_modified_gmt><![CDATA[2020-10-20 09:12:43]]></wp:post_modified_gmt>
		<wp:comment_status><![CDATA[closed]]></wp:comment_status>
		<wp:ping_status><![CDATA[closed]]></wp:ping_status>
		<wp:post_name><![CDATA[store_submission]]></wp:post_name>
		<wp:status><![CDATA[publish]]></wp:status>
		<wp:post_parent>0</wp:post_parent>
		<wp:menu_order>0</wp:menu_order>
		<wp:post_type><![CDATA[training_service]]></wp:post_type>
		<wp:post_password><![CDATA[]]></wp:post_password>
		<wp:is_sticky>0</wp:is_sticky>
														<wp:postmeta>
		<wp:meta_key><![CDATA[_edit_last]]></wp:meta_key>
		<wp:meta_value><![CDATA[68]]></wp:meta_value>
		</wp:postmeta>
							</item>
					<item>
		<title><![CDATA[create_ticket]]></title>
		<link>https://awxdocs.com/?post_type=training_service&#038;p=866334</link>
		<pubDate>Thu, 15 Oct 2020 05:30:15 +0000</pubDate>
		<dc:creator><![CDATA[abhishek B]]></dc:creator>
		<guid isPermaLink="false">https://awxdocs.com/?post_type=training_service&#038;p=866334</guid>
		<description></description>
		<content:encoded><![CDATA[//*****generate ticket****//
[templates.add generate]

  //******default mod: single-submit when, template.mod is empty******//
  [template.set mod="single-submit" c.empty="template.mod"/]
  [template.set tpl="update_meta" c.empty="template.tpl"/]
    
  //******default service_type: aw_form when, template.service_type is empty******//
  [template.set service_type="training_service" c.empty="template.service_type"/]
    
	//****generate ticket****//
	[session_ticket.create nonce=yes set=template.ticket/]     
	[template.set_array collection post_type={template.service_type} /]

	//*****set activity against the ticket*****//
	[session_ticket.set_activity {template.ticket} collection={template.collection} module='{template.mod}.{template.tpl}' /]
  [session_ticket.set {template.ticket} field="form_type" value={template.form_type} /]
  [session_ticket.set {template.ticket} field="form_config" value={template.form_config} /]
  
	//*****return ticket*****//
	[template.return template.ticket/]
[/templates.add]]]></content:encoded>
		<excerpt:encoded><![CDATA[]]></excerpt:encoded>
		<wp:post_id>866334</wp:post_id>
		<wp:post_date><![CDATA[2020-10-15 11:00:15]]></wp:post_date>
		<wp:post_date_gmt><![CDATA[2020-10-15 05:30:15]]></wp:post_date_gmt>
		<wp:post_modified><![CDATA[2020-10-15 11:00:15]]></wp:post_modified>
		<wp:post_modified_gmt><![CDATA[2020-10-15 05:30:15]]></wp:post_modified_gmt>
		<wp:comment_status><![CDATA[closed]]></wp:comment_status>
		<wp:ping_status><![CDATA[closed]]></wp:ping_status>
		<wp:post_name><![CDATA[create_ticket]]></wp:post_name>
		<wp:status><![CDATA[publish]]></wp:status>
		<wp:post_parent>0</wp:post_parent>
		<wp:menu_order>0</wp:menu_order>
		<wp:post_type><![CDATA[training_service]]></wp:post_type>
		<wp:post_password><![CDATA[]]></wp:post_password>
		<wp:is_sticky>0</wp:is_sticky>
														<wp:postmeta>
		<wp:meta_key><![CDATA[_edit_last]]></wp:meta_key>
		<wp:meta_value><![CDATA[68]]></wp:meta_value>
		</wp:postmeta>
							</item>
					<item>
		<title><![CDATA[fields_config]]></title>
		<link>https://awxdocs.com/?post_type=training_service&#038;p=866337</link>
		<pubDate>Thu, 15 Oct 2020 05:30:27 +0000</pubDate>
		<dc:creator><![CDATA[abhishek B]]></dc:creator>
		<guid isPermaLink="false">https://awxdocs.com/?post_type=training_service&#038;p=866337</guid>
		<description></description>
		<content:encoded><![CDATA[[env.set_array form]
  [meta_table]training_meta[/meta_table]
  [fields]
  	//** Back-end fields start **//
    [training_title label='Training Title' data_type=string coll_type='training' /] 
    [training_days label='Training Days' data_type=string coll_type='training' /] 
    [training_hrs label='Training Hours' data_type=string coll_type='training' /] 
    
    [module_title label='Module Title' data_type=string coll_type='training_sub' /] 
    [module_days label='Module Days' data_type=string coll_type='training_sub' /] 
    [module_hrs label='Module Hours' data_type=string coll_type='training_sub' /] 
    [term_id label='Action Term Id' data_type=string coll_type='training_sub' /] 
    [test_url label='Test URL' data_type=string coll_type='training_sub' /] 
    [action_message label='Message after Action' data_type=string coll_type='training_sub' /]
    [action_url label='Action URL for Watch Demo or Read Review' data_type=string coll_type='training_sub' /] 
    [material_url label='Download Material Link' data_type=url coll_type='training_sub' /] 
    [form_slug label='Submit Request Form' data_type=string coll_type='training_sub' /] 
    //** Back-end fields ends **//
    
    //** Front-end start **//
    [dp_name label='Name' data_type=string coll_type='training_submission' /] 
    [dp_city label='City' data_type=string coll_type='training_submission' /] 
    [dp_email label='Email-Id' data_type=string coll_type='training_submission' /] 
    [dp_phone label='Phone No.' data_type=string coll_type='training_submission' /] 
    [tentative_date label='Tentative Availability Date' data_type=string coll_type='training_submission' /]
    [tentative_time_slot label='Tentative Time Slot' data_type=string coll_type='training_submission' /]
    //**[field_three label='Field Three' data_type=string coll_type='training_submission' /]**// 
    //** Front-end ends **//
  [/fields]
[/env.set_array]

[module.set default_tooltip='' /]

[loop.@eachIndex start=0 step=1 stop=23]
  [aw2.get @eachIndex.item set=template.hours.new /]
[/loop.@eachIndex]

[loop.@i start=9 step=1 stop=17]
	
	[template.set time1="{@i.item}+1" /]
  [template.set time2="{@i.item}+2" /]
  [php.mktime p1="{template.time1.math}" set=template.time1/]
  [php.mktime p1="{template.time2.math}" set=template.time2/]
  [php.date p1="h:00 a" p2="{template.time1}" set=template.curr/]
  [php.date p1="h:00 a" p2="{template.time2}" set=template.nxt/]
  
  [template.set slot="{template.curr} - {template.nxt}" /]
  [aw2.get template.slot set=template.slots.new /]
[/loop.@i]

[query.get_terms taxonomies='training_types' hide_empty=0 parent=0 set="template.taxonomies" /]
[loop.@i template.taxonomies]
  [aw2.get @i.item.slug set=template.actions.new /]
[/loop.@i]

[arr.create set=template.status]
 [0]Active[/0]
 [1]Inactive[/1]
[/arr.create]
[aw2.get app.dp_meta set="template.user"/] 

[training.get.userTraining object_id="{module.data.object_id}" set=template.single/]  
[template.set tntive_date_type ='date' /]
[template.set time_slot_type ='select' /]
[template.set date_class ='tflatpckr' /]
[if.not_empty template.single.tentative_date]
	[template.set tntive_date_type ='text' /]
  [template.set time_slot_type ='text' /]
  [template.set date_class ='' /]
[/if.not_empty]

[env.set_array forms_collection]

	//** Back end Training Form Start **//
    //** Add Training Form **//
    [add-training]
      [atts form_type="add-training" /]
      [groups]
        [training-details]
          [field value={module.data.training_title} training_title label="Training Name"	type="text"	edit=yes	parent_class='col-md-12'	required=yes /]
          [field value={module.data.training_days} training_days label="Training Days"	type="text"	edit=yes	parent_class='col-md-6'	required=yes /]
          [field value={module.data.training_hrs} training_hrs label="Hours" type="select" options='{template.hours}' edit=yes parent_class='col-md-6' required=yes /] 
          [field value={module.data.training_status} training_status label="Active Status" type="select" options='{template.status}' edit=yes parent_class='col-md-6' required=yes /]
        [/training-details]
      [/groups]
    [/add-training]

    //** Add New Module Form **//
    [add-training-module]
      [atts form_type="add-training-module" /]
      [groups]
        [training-details]
          [field value={module.data.module_title} training_module_title label="Module Name"	type="text"	edit=yes	parent_class='col-md-12' required=yes /]
          [field value={module.data.module_days} training_module_days label="Module Days"	type="text"	edit=yes	parent_class='col-md-6'	required=yes /]
          [field value={module.data.module_hrs} training_module_hrs label="Hours" type="select" options='{template.hours}' edit=yes parent_class='col-md-6' required=yes /] 
          [field value={module.data.action_slug} action_slug label="Action" in_class="training_type" type="select" options='{template.actions}' edit=yes parent_class='col-md-6' required=yes /] 
          [field value={module.data.test_url} test_url label="Google Form Link (For Test)" type="text"	edit=yes	parent_class='col-md-6' required=yes /]
          [field value={module.data.order_key} order_key label="Order/Sequence Number" type="text"	edit=yes	parent_class='col-md-6' required=yes /]
          [field value={module.data.action_message} action_message label=" Message (To show after completion of every action)"	type="textarea"	edit=yes	parent_class='col-md-12' required=yes /]
        [/training-details]
      [/groups]
    [/add-training-module]
  //** Back end Training Form Start **//
  
  //** Front end Training Form Start **//
    //** Request form **//
    [request-form]
      [atts form_type="request-form" /]
      [groups]
        [training-field label='Request for Training - {module.data.module_title}']
          [field value={template.user.name} dp_name label="Name" type="text" readonly=yes edit=yes parent_class='col-md-6' required=yes /]
          [field value={template.user.city} dp_city label="City"	type="text"	readonly=yes edit=yes	parent_class='col-md-6'	required=yes /]
          [field value={template.user.email} dp_email label="Email-Id" type="text"	readonly=yes edit=yes parent_class='col-md-6' required=yes /]
          [field value={template.user.phone} dp_phone label="Phone No." type="text" readonly=yes edit=yes	parent_class='col-md-6'	required=yes /]
          //** the below date picket is reinitilize in http://dc.wordpoets.com/wp-admin/post.php?post=873111&action=edit
          with class tflatpckr to disabled the dates**//
          [field value={template.single.tentative_date} tentative_date label="Tentative Availability Date" type="{template.tntive_date_type}" edit=yes parent_class='col-md-6' in_class='{template.date_class}' required=yes readonly=yes/]
          [field value={template.single.tentative_time_slot} tentative_time_slot label="Time Slot" type="{template.time_slot_type}"  edit=yes options='{template.slots}' parent_class='col-md-6' required=yes readonly=yes/]
         //** [field field_three label="Field Three" type="file_upload" edit=yes parent_class='col-md-12'  /] **//
        [/training-field]
      [/groups]
    [/request-form]

    //** Read/ Review **//
    [read-review]
      [atts form_type="read-review" /]
      [groups]
        [training-field label='']

        [/training-field]
      [/groups]
    [/read-review]
    
    //** Watch Demo **//
    [watch-demo]
      [atts form_type="watch-demo" /]
      [groups]
        [training-field label='']

        [/training-field]
      [/groups]
    [/watch-demo]
    
    //** Watch Demo & Material **//
    [watch-demo-download-material]
      [atts form_type="watch-demo-download-material" /]
      [groups]
        [training-field label='']
        [/training-field]
      [/groups]
    [/watch-demo-download-material]
  //** Front end Training Form End **//
  
[/env.set_array]]]></content:encoded>
		<excerpt:encoded><![CDATA[]]></excerpt:encoded>
		<wp:post_id>866337</wp:post_id>
		<wp:post_date><![CDATA[2020-10-15 11:00:27]]></wp:post_date>
		<wp:post_date_gmt><![CDATA[2020-10-15 05:30:27]]></wp:post_date_gmt>
		<wp:post_modified><![CDATA[2020-10-15 13:15:36]]></wp:post_modified>
		<wp:post_modified_gmt><![CDATA[2020-10-15 07:45:36]]></wp:post_modified_gmt>
		<wp:comment_status><![CDATA[closed]]></wp:comment_status>
		<wp:ping_status><![CDATA[closed]]></wp:ping_status>
		<wp:post_name><![CDATA[fields_config]]></wp:post_name>
		<wp:status><![CDATA[publish]]></wp:status>
		<wp:post_parent>0</wp:post_parent>
		<wp:menu_order>0</wp:menu_order>
		<wp:post_type><![CDATA[training_service]]></wp:post_type>
		<wp:post_password><![CDATA[]]></wp:post_password>
		<wp:is_sticky>0</wp:is_sticky>
														<wp:postmeta>
		<wp:meta_key><![CDATA[_edit_last]]></wp:meta_key>
		<wp:meta_value><![CDATA[68]]></wp:meta_value>
		</wp:postmeta>
							</item>
					<item>
		<title><![CDATA[create_form]]></title>
		<link>https://awxdocs.com/?post_type=training_service&#038;p=866340</link>
		<pubDate>Thu, 15 Oct 2020 05:30:41 +0000</pubDate>
		<dc:creator><![CDATA[abhishek B]]></dc:creator>
		<guid isPermaLink="false">https://awxdocs.com/?post_type=training_service&#038;p=866340</guid>
		<description></description>
		<content:encoded><![CDATA[//** training backend **//
[templates.add main]
  
  [template.set_array ack status="error" int_reason="topic is not provided." reason="topic is required." /]
  [template.return template.ack empty='{module.topic}' /]
  
  [this_collection.fields_config data="{module.data}"/]
	[env.get forms_collection.{module.topic} set='module.form-config' /]

  [if.empty module.form-config]
  	[template.set error]
  		<h4 class='text-center brand-danger mar-t-5'>No form available!</h4>  
    [/template.set]
    [template.return template.error /]
  [/if.empty]
  
  [env.get module.form-config.groups set='module.form-groups' /]
  [aw2.get token set=module.token /]
  
    <form data-safe_id='[app.safe_id /]' id='[module.token/]' 
    	class='[module.token/] float-label [module.get form_layout default="top-label" /]' novalidate>
      [loop.@gr module.form-groups]
        [form_control2.run group data={@gr.item} /]
      [/loop.@gr]

      <div class="is-flex justify-content-end">
      	<button data-safe_id='[app.safe_id /]' type="submit" 
        	class="[module.token /]-submit btn btn-primary desktop profile-btns edit-profile-submit">Submit</button>
      </div>
    </form>
  	
    [this_collection.create_ticket.generate 
      mod='{module.mod}'
      tpl='{module.tpl}'
      set=template.ticket
    /]
    
    //**
     To generate session ticket
    [session_ticket.create nonce=yes set=module.ticket_id /]
    [session_ticket.set_activity {module.ticket_id} app="training" module="{module.axn_url}" /]
    **//
    <script
      data-safe_id='[app.safe_id /]'
      type="spa/axn"
      axn="form_upload.ajax"
      bind="submit"
      ajax_selector='.ckeditors'
      bind_selector='#[module.token /]'
      disable_selector='.[module.token /]-submit'
      route_ajax='t/[template.ticket /]'
      post_id='[module.data.post_id]'
      object_id='[module.data.object_id/]' 
      parent_object_id='[module.data.parent_trm_id/]'
    >
    </script>
    
  <script type="spa/axn" axn="core.run_script">
    var validation_rule={}
    validation_rule.message='Either current or $$ field is required';
    validation_rule.attribute='data-required_or';
    validation_rule.fn=function(o){

      var anotherel = o.el.data('required_or');
      if(!anotherel)
      	return true;
      validation_rule.message='Either current or ' + anotherel + ' field is required';
      var el2 = $('#[module.token /] [name="' + anotherel + '"]');
      if(!o.el.val() && !el2.val())
        return false;
      return true;
    }
    
    spa.validation_rules.push(validation_rule);

    //** reload on cancel btn click **//
    $('.[module.token /]-cancel').click(function(){
    	location.reload();
    });
    
  </script>
  
[/templates.add]

//** training front end **//
[templates.add submission]
  [template.set_array ack status="error" int_reason="form type is not provided." reason="form type is required." /]
  [template.return template.ack empty='{template.form_type}' /]
  
  [this_collection.fields_config data="{template.data}"/]
	[env.get forms_collection.{template.form_type} set='module.form-config' /]

  [if.empty module.form-config]
  	[template.set error]
  		<h4 class='text-center brand-danger mar-t-5'>No form available!</h4>  
    [/template.set]
    [template.return template.error /]
  [/if.empty]
  
  [env.get module.form-config.groups set='module.form-groups' /]
  [aw2.get token set=module.token /]
  
  	<form class="submission-form dc-form-[template.data.object_id/] dc-offering-form float-label row justify-content-center [module.token/]" data-safe_id='[app.safe_id /]' id='[module.token/]' novalidate >
      <div class="container">
      	[loop.@gr module.form-groups]
          [form_control2.run group data={@gr.item} /]
        [/loop.@gr]
      </div>
			
      //** only show submit button when test not completed **//
      [training.get.userTraining object_id="{template.data.object_id}" set=template.single/] 
      [if.not_equal lhs='{template.single.module_status}' rhs='completed']
          <div class="form-group col-12 col-md-7 text-center">
            <button data-safe_id='[app.safe_id /]' type="submit" class="[module.token /]-submit btn btn-primary">
              [template.btn_text default="Submit" /]
            </button>
          </div>
      [/if.not_equal]
    </form>
  	
    [this_collection.create_ticket.generate 
    	form_config='{module.form-config.json_encode}' 
      form_type='{template.form_type}'
      mod='{template.mod}'
      tpl='{template.tpl}'
      o.set=template.ticket
    /]
    [if.not_equal lhs='{template.single.module_status}' rhs='completed']
        <script
          data-safe_id='[app.safe_id /]'
          type="spa/axn"
          axn="form_upload.ajax"
          bind="submit"
          bind_selector='.[module.token /]'
          disable_selector='.[module.token /]-submit'
          route_ajax='t/[template.ticket /]'
          module_object_id='[template.data.object_id/]' 
        >
        </script>
    [/if.not_equal]
    
[/templates.add]]]></content:encoded>
		<excerpt:encoded><![CDATA[]]></excerpt:encoded>
		<wp:post_id>866340</wp:post_id>
		<wp:post_date><![CDATA[2020-10-15 11:00:41]]></wp:post_date>
		<wp:post_date_gmt><![CDATA[2020-10-15 05:30:41]]></wp:post_date_gmt>
		<wp:post_modified><![CDATA[2020-10-15 11:00:41]]></wp:post_modified>
		<wp:post_modified_gmt><![CDATA[2020-10-15 05:30:41]]></wp:post_modified_gmt>
		<wp:comment_status><![CDATA[closed]]></wp:comment_status>
		<wp:ping_status><![CDATA[closed]]></wp:ping_status>
		<wp:post_name><![CDATA[create_form]]></wp:post_name>
		<wp:status><![CDATA[publish]]></wp:status>
		<wp:post_parent>0</wp:post_parent>
		<wp:menu_order>0</wp:menu_order>
		<wp:post_type><![CDATA[training_service]]></wp:post_type>
		<wp:post_password><![CDATA[]]></wp:post_password>
		<wp:is_sticky>0</wp:is_sticky>
														<wp:postmeta>
		<wp:meta_key><![CDATA[_edit_last]]></wp:meta_key>
		<wp:meta_value><![CDATA[68]]></wp:meta_value>
		</wp:postmeta>
							</item>
					<item>
		<title><![CDATA[store_training]]></title>
		<link>https://awxdocs.com/?post_type=training_service&#038;p=866342</link>
		<pubDate>Thu, 15 Oct 2020 05:30:56 +0000</pubDate>
		<dc:creator><![CDATA[abhishek B]]></dc:creator>
		<guid isPermaLink="false">https://awxdocs.com/?post_type=training_service&#038;p=866342</guid>
		<description></description>
		<content:encoded><![CDATA[[templates.add main]

[date.create now date_format='Y-m-d H:i:s' set=template.dt /]
[php.strtotime p1="{template.dt}" set=template.epoch /]

[template.set object_id="DPTR{unique_number}" /]
[module.set_array meta.new meta_key="object_id" meta_value="{template.object_id}"/]
[module.set_array meta.new meta_key='created_datetime' meta_value='{template.dt}' /]
[module.set_array meta.new meta_key='created_epoch' meta_value='{template.epoch}' /] 
[module.set_array meta.new meta_key='created_by' meta_value='{current_user.data.user_email}' /]

  [db.meta.insert_coll_meta 
    object_id="{template.object_id}"
    meta_table="training_meta"
    meta='{module.meta}'
    coll_id="{module.post_id}"
    coll_type='training' 
  /]
  [template.return template.object_id/]
[/templates.add]

[templates.add createTrainingMeta]
	//**Save in post**//
  [arr.create set=template.args]
    [post_type]dp_training[/post_type]
    [post_title][request.training_title /][/post_title]
    [post_status]publish[/post_status]
  [/arr.create]
  [php.wp_insert_post p1={template.args} set=template.id /]
  //**prepare meta keys**//
  [template.set_array meta.new meta_key='post_id' meta_value='{template.id}' /]
  [template.set_array meta.new meta_key='training_title' meta_value='{request.training_title}' /]
  [template.set_array meta.new meta_key='training_days' meta_value='{request.training_days}' /] 
  [template.set_array meta.new meta_key='training_hrs' meta_value='{request.training_hrs}' /] 
  [template.set_array meta.new meta_key='training_status' meta_value='{request.training_status}' /] 
  
	[training.store_training meta="{template.meta}" post_id="{template.id}" set="template.object_id"/]
  
  <template axn="selector.replace" selector=".t-response" get="me.html">
  	<span class="text-center t-response">
      <div class="alert alert-success" role="alert">
        Training Added Successully
      </div>
      <h4>Hold on ! <br/>We are redirecting you...</h4>
    </span>
    <script type="spa/axn" axn="core.run_script">
    	setTimeout(function(){ 
      	window.location.href = "[app.path /]/edit-training/[template.object_id/]";
      }, 1000);
    </script>
  </template>
[/templates.add]

//**Save Training Module**//
[templates.add module]
	[date.create now date_format='Y-m-d H:i:s' set=template.dt /]
  [php.strtotime p1="{template.dt}" set=template.epoch /]

  [template.set object_id="TRN{unique_number}" /]
  [template.set_array meta.new meta_key="object_id" meta_value="{template.object_id}"/]
  [template.set_array meta.new meta_key='created_datetime' meta_value='{template.dt}' /]
  [template.set_array meta.new meta_key='created_epoch' meta_value='{template.epoch}' /] 
  [template.set_array meta.new meta_key='created_by' meta_value='{current_user.data.user_email}' /]
  [template.set_array meta.new meta_key="parent_trm_id" meta_value="{template.parent_object_id}"/]
  [template.set_array meta.new meta_key='child_trm_id' meta_value='{template.object_id}' /]
  [template.set_array meta.new meta_key='order_key' meta_value='{request.order_key}' /]
  //**[php.print_r p1={template.meta} /]**//
 [db.meta.insert_coll_meta 
    object_id="{template.object_id}"
    meta_table="training_meta"
    meta='{template.meta}'
    coll_id="{template.parent_object_id}"
    coll_type='training_sub' 
  /]
[/templates.add]

[templates.add createModuleMeta]
  	//** Material File Upload **//
    [aw2.upload	attach_to_post
      upload_element_id='material_url'
      allowed_file_types='pdf'
      file_name='{request.material_url}'
      overwrite_file='yes'
      set_featured="true"
      set=template.material_url /]
      
  [if.not_empty template.material_url]
      [php.wp_get_attachment_url p1="{template.material_url}" set=template.material_url /]
  [/if.not_empty]
  
  //** Read/Review File Upload **//
  [aw2.upload	attach_to_post
    upload_element_id='read_review_file'
    allowed_file_types='pdf'
    file_name='{request.read_review_file}'
    overwrite_file='yes'
    set_featured="true"
    set=template.action_url /]
    
  //**
    if read review file is not empty use action_url to store file path else 
    use for Watch Demo
  **//
  [if.not_empty template.action_url]
      [php.wp_get_attachment_url p1="{template.action_url}" set=template.action_url /]
  [/if.not_empty]
  [if.else]
  		[template.set action_url="{request.action_url}" /]
  [/if.else]
    
	//** prepare meta keys **//
  [template.set_array meta.new meta_key='module_title' meta_value='{request.training_module_title}' /]
  [template.set_array meta.new meta_key='module_days' meta_value='{request.training_module_days}' /] 
  [template.set_array meta.new meta_key='module_hrs' meta_value='{request.training_module_hrs}' /] 
  [template.set_array meta.new meta_key='action_slug' meta_value='{request.action_slug}' /]
  //** if request has submit-request **//
  [template.set_array meta.new meta_key='form_slug' meta_value='{request.form_slug}' /]
  //** if request has submit-request || read-review || watch demo || watch demo & upload material **//
  [template.set_array meta.new meta_key='action_url' meta_value='{template.action_url}' /]  
  //** if request has watch demo & upload material **//
  [template.set_array meta.new meta_key='material_url' meta_value='{template.material_url}' /]
  [template.set_array meta.new meta_key='test_url' meta_value='{request.test_url}' /]
  [template.set_array meta.new meta_key='action_message' meta_value='{request.action_message}' /]
  
	[training.store_training.module meta="{template.meta}" parent_object_id="{request.object_id}"/]
  
  <template axn="selector.replace" selector=".t-response" get="me.html">
  	<div class="row justify-content-center text-center t-response">  
      <div class="col-md-8">
        <span class="">
          <div class="alert alert-success" role="alert">
            Training Module Added Successully
          </div>
          <h4>Hold on ! Refereshing page...</h4>
        </span>
      </div>
    </div>
    <script type="spa/axn" axn="core.run_script">
    	setTimeout(function(){ 
      	location.reload();
      }, 1000);
    </script>
  </template>
[/templates.add]]]></content:encoded>
		<excerpt:encoded><![CDATA[]]></excerpt:encoded>
		<wp:post_id>866342</wp:post_id>
		<wp:post_date><![CDATA[2020-10-15 11:00:56]]></wp:post_date>
		<wp:post_date_gmt><![CDATA[2020-10-15 05:30:56]]></wp:post_date_gmt>
		<wp:post_modified><![CDATA[2020-10-15 11:00:56]]></wp:post_modified>
		<wp:post_modified_gmt><![CDATA[2020-10-15 05:30:56]]></wp:post_modified_gmt>
		<wp:comment_status><![CDATA[closed]]></wp:comment_status>
		<wp:ping_status><![CDATA[closed]]></wp:ping_status>
		<wp:post_name><![CDATA[store_training]]></wp:post_name>
		<wp:status><![CDATA[publish]]></wp:status>
		<wp:post_parent>0</wp:post_parent>
		<wp:menu_order>0</wp:menu_order>
		<wp:post_type><![CDATA[training_service]]></wp:post_type>
		<wp:post_password><![CDATA[]]></wp:post_password>
		<wp:is_sticky>0</wp:is_sticky>
														<wp:postmeta>
		<wp:meta_key><![CDATA[_edit_last]]></wp:meta_key>
		<wp:meta_value><![CDATA[68]]></wp:meta_value>
		</wp:postmeta>
							</item>
					<item>
		<title><![CDATA[update_training]]></title>
		<link>https://awxdocs.com/?post_type=training_service&#038;p=866344</link>
		<pubDate>Thu, 15 Oct 2020 05:31:12 +0000</pubDate>
		<dc:creator><![CDATA[abhishek B]]></dc:creator>
		<guid isPermaLink="false">https://awxdocs.com/?post_type=training_service&#038;p=866344</guid>
		<description></description>
		<content:encoded><![CDATA[[templates.add main]

[date.create now date_format='Y-m-d H:i:s' set=template.dt /]
[php.strtotime p1="{template.dt}" set=template.epoch /]

[module.set_array meta.new meta_key="object_id" meta_value="{module.object_id}"/]
[module.set_array meta.new meta_key='created_by' meta_value='{current_user.data.user_email}' /]

[db.meta.update_coll_meta 
	object_id="{module.object_id}"
  meta_table="training_meta"
  meta='{module.meta}'
  coll_id="{module.post_id}"
  coll_type='training' 
/]
[/templates.add]

[templates.add createTrainingMeta]
	
	//**update in post**//
  [arr.create set=template.args]
  	[ID][request.post_id /][/ID]
    [post_type]dp_training[/post_type]
    [post_title][request.training_title /][/post_title]
  [/arr.create]
  [php.wp_insert_post p1={template.args} set=template.id /]
  
  //**prepare meta keys**//
  [template.set_array meta.new meta_key='post_id' meta_value='{template.id}' /]
  [template.set_array meta.new meta_key='training_title' meta_value='{request.training_title}' /]
  [template.set_array meta.new meta_key='training_days' meta_value='{request.training_days}' /] 
  [template.set_array meta.new meta_key='training_hrs' meta_value='{request.training_hrs}' /] 
  [template.set_array meta.new meta_key='training_status' meta_value='{request.training_status}' /] 
  
  [training.update_training  meta="{template.meta}"  post_id="{request.post_id}"  object_id="{request.object_id}"  /]
  
  <template axn="selector.replace" selector=".t-response" get="me.html">
  	<div class="row justify-content-center text-center t-response">  
      <div class="col-md-8">
        <span class="">
          <div class="alert alert-success" role="alert">
            Training Updated Successully
          </div>
          <h4>Hold on ! Refereshing page...</h4>
        </span>
      </div>
    </div>
    <script type="spa/axn" axn="core.run_script">
    	setTimeout(function(){ 
      	location.reload();
      }, 1000);
    </script>
  </template>
[/templates.add]

[templates.add module]

  [template.set_array meta.new meta_key="object_id" meta_value="{template.object_id}"/]
  [template.set_array meta.new meta_key='created_by' meta_value='{current_user.data.user_email}' /]
  [db.meta.update_coll_meta 
    object_id="{template.object_id}"
    meta_table="training_meta"
    meta='{template.meta}'
    coll_id="{template.parent_object_id}"
    coll_type='training_sub' 
  /]
  
[/templates.add]

[templates.add createModuleMeta]
  	//** Material File Upload **//
    [aw2.upload	attach_to_post
      upload_element_id='material_url'
      allowed_file_types='pdf'
      file_name='{request.material_url}'
      overwrite_file='yes'
      set_featured="true"
      set=template.material_url /]
      
  [if.not_empty template.material_url]
      [php.wp_get_attachment_url p1="{template.material_url}" set=template.material_url /]
      //** if request has watch demo & upload material **//
  		[template.set_array meta.new meta_key='material_url' meta_value='{template.material_url}' /]
  [/if.not_empty]
  
  //** Read/Review File Upload **//
  [aw2.upload	attach_to_post
    upload_element_id='read_review_file'
    allowed_file_types='pdf'
    file_name='{request.read_review_file}'
    overwrite_file='yes'
    set_featured="true"
    set=template.action_url /]
    
  //**
    if read review file is not empty use action_url to store file path else 
    use for Watch Demo
  **//
  [if.not_empty template.action_url]
      [php.wp_get_attachment_url p1="{template.action_url}" set=template.action_url /]
      [template.set_array meta.new meta_key='action_url' meta_value='{template.action_url}' /]  
  [/if.not_empty]
  
  [if.not_empty request.action_url]
  		[template.set action_url="{request.action_url}" /]
      //** if request has submit-request || read-review || watch demo || watch demo & upload material **//
  		[template.set_array meta.new meta_key='action_url' meta_value='{template.action_url}' /]  
  [/if.not_empty]
    
	//** prepare meta keys **//
  [template.set_array meta.new meta_key='module_title' meta_value='{request.training_module_title}' /]
  [template.set_array meta.new meta_key='module_days' meta_value='{request.training_module_days}' /] 
  [template.set_array meta.new meta_key='module_hrs' meta_value='{request.training_module_hrs}' /] 
  [template.set_array meta.new meta_key='action_slug' meta_value='{request.action_slug}' /]
  //** if request has submit-request **//
  [template.set_array meta.new meta_key='form_slug' meta_value='{request.form_slug}' /]
  [template.set_array meta.new meta_key='test_url' meta_value='{request.test_url}' /]
  [template.set_array meta.new meta_key='action_message' meta_value='{request.action_message}' /]
  [template.set_array meta.new meta_key='order_key' meta_value='{request.order_key}' /]
  
	[training.update_training.module 
  	meta="{template.meta}" 
    object_id="{request.object_id}" 
    parent_object_id="{request.parent_object_id}"
  /]
  
  <template axn="selector.replace" selector=".t-response" get="me.html">
  	<span class="text-center t-response">
      <div class="alert alert-success" role="alert">
        Training Module Updated Successully
      </div>
      <h4>Hold on ! Refereshing page...</h4>
    </span>
    <script type="spa/axn" axn="core.run_script">
    	setTimeout(function(){ 
      	location.reload();
      }, 1000);
    </script>
  </template>
[/templates.add]]]></content:encoded>
		<excerpt:encoded><![CDATA[]]></excerpt:encoded>
		<wp:post_id>866344</wp:post_id>
		<wp:post_date><![CDATA[2020-10-15 11:01:12]]></wp:post_date>
		<wp:post_date_gmt><![CDATA[2020-10-15 05:31:12]]></wp:post_date_gmt>
		<wp:post_modified><![CDATA[2020-10-15 11:01:12]]></wp:post_modified>
		<wp:post_modified_gmt><![CDATA[2020-10-15 05:31:12]]></wp:post_modified_gmt>
		<wp:comment_status><![CDATA[closed]]></wp:comment_status>
		<wp:ping_status><![CDATA[closed]]></wp:ping_status>
		<wp:post_name><![CDATA[update_training]]></wp:post_name>
		<wp:status><![CDATA[publish]]></wp:status>
		<wp:post_parent>0</wp:post_parent>
		<wp:menu_order>0</wp:menu_order>
		<wp:post_type><![CDATA[training_service]]></wp:post_type>
		<wp:post_password><![CDATA[]]></wp:post_password>
		<wp:is_sticky>0</wp:is_sticky>
														<wp:postmeta>
		<wp:meta_key><![CDATA[_edit_last]]></wp:meta_key>
		<wp:meta_value><![CDATA[68]]></wp:meta_value>
		</wp:postmeta>
							</item>
				<item>
		<title><![CDATA[layout]]></title>
		<link>https://awxdocs.com/?post_type=c_training&#038;p=866277</link>
		<pubDate>Thu, 15 Oct 2020 05:17:23 +0000</pubDate>
		<dc:creator><![CDATA[abhishek B]]></dc:creator>
		<guid isPermaLink="false">https://awxdocs.com/?post_type=c_training&#038;p=866277</guid>
		<description></description>
		<content:encoded><![CDATA[[backend_design.layout /]]]></content:encoded>
		<excerpt:encoded><![CDATA[]]></excerpt:encoded>
		<wp:post_id>866277</wp:post_id>
		<wp:post_date><![CDATA[2020-10-15 10:47:23]]></wp:post_date>
		<wp:post_date_gmt><![CDATA[2020-10-15 05:17:23]]></wp:post_date_gmt>
		<wp:post_modified><![CDATA[2020-10-15 10:47:23]]></wp:post_modified>
		<wp:post_modified_gmt><![CDATA[2020-10-15 05:17:23]]></wp:post_modified_gmt>
		<wp:comment_status><![CDATA[closed]]></wp:comment_status>
		<wp:ping_status><![CDATA[closed]]></wp:ping_status>
		<wp:post_name><![CDATA[layout]]></wp:post_name>
		<wp:status><![CDATA[publish]]></wp:status>
		<wp:post_parent>0</wp:post_parent>
		<wp:menu_order>0</wp:menu_order>
		<wp:post_type><![CDATA[c_training]]></wp:post_type>
		<wp:post_password><![CDATA[]]></wp:post_password>
		<wp:is_sticky>0</wp:is_sticky>
														<wp:postmeta>
		<wp:meta_key><![CDATA[_edit_last]]></wp:meta_key>
		<wp:meta_value><![CDATA[68]]></wp:meta_value>
		</wp:postmeta>
							</item>
					<item>
		<title><![CDATA[rights]]></title>
		<link>https://awxdocs.com/?post_type=c_training&#038;p=866279</link>
		<pubDate>Thu, 15 Oct 2020 05:17:42 +0000</pubDate>
		<dc:creator><![CDATA[abhishek B]]></dc:creator>
		<guid isPermaLink="false">https://awxdocs.com/?post_type=c_training&#038;p=866279</guid>
		<description></description>
		<content:encoded><![CDATA[[arr.create set='app.rights']
	[access mode='logged' unlogged='wp_login' title='Login To Dashboard App' /]
  [auth a1 method=twofactor_login_authenticator all_roles="interviewer" /]
[/arr.create]]]></content:encoded>
		<excerpt:encoded><![CDATA[]]></excerpt:encoded>
		<wp:post_id>866279</wp:post_id>
		<wp:post_date><![CDATA[2020-10-15 10:47:42]]></wp:post_date>
		<wp:post_date_gmt><![CDATA[2020-10-15 05:17:42]]></wp:post_date_gmt>
		<wp:post_modified><![CDATA[2020-10-15 10:47:42]]></wp:post_modified>
		<wp:post_modified_gmt><![CDATA[2020-10-15 05:17:42]]></wp:post_modified_gmt>
		<wp:comment_status><![CDATA[closed]]></wp:comment_status>
		<wp:ping_status><![CDATA[closed]]></wp:ping_status>
		<wp:post_name><![CDATA[rights]]></wp:post_name>
		<wp:status><![CDATA[publish]]></wp:status>
		<wp:post_parent>0</wp:post_parent>
		<wp:menu_order>0</wp:menu_order>
		<wp:post_type><![CDATA[c_training]]></wp:post_type>
		<wp:post_password><![CDATA[]]></wp:post_password>
		<wp:is_sticky>0</wp:is_sticky>
														<wp:postmeta>
		<wp:meta_key><![CDATA[_edit_last]]></wp:meta_key>
		<wp:meta_value><![CDATA[68]]></wp:meta_value>
		</wp:postmeta>
							</item>
				<item>
		<title><![CDATA[action-block]]></title>
		<link>https://awxdocs.com/?post_type=m_training&#038;p=866305</link>
		<pubDate>Thu, 15 Oct 2020 05:24:42 +0000</pubDate>
		<dc:creator><![CDATA[abhishek B]]></dc:creator>
		<guid isPermaLink="false">https://awxdocs.com/?post_type=m_training&#038;p=866305</guid>
		<description></description>
		<content:encoded><![CDATA[[templates.add main]
	
  <div class="row brand-seventh-bg pad-y-4 box-shadow no-margin">
  	<div class="col-lg-5 col-md-5 is-flex align-items-xl-center ">
    	<form class="width-100 no-margin-bottom">
      	<div class="row align-items-center">
        	<div class="col-lg-3">
          	<p class="pad-x-3 no-margin font-size-large font-semibold">Action</p>
          </div>
          [templates.run select_action /]
        </div>
      </form>
    </div>
    <div class="col-lg-7 col-md-7 text-md-right is-flex align-items-xl-center">
      [if.not_empty single_data.dp_meta.modified_on]
        <span class="pad-1 width-100"> Last Modified on<b class="font-bold pad-1">
          [aw2.get single_data.dp_meta.modified_on date_format='d-M-Y'/] at
          [aw2.get single_data.dp_meta.modified_on date_format='H:i A'/]
        </b>
        by<b class="font-bold pad-1">[aw2.get single_data.dp_meta.modified_by /]</b></span>
      [/if.not_empty]
    </div>
  </div>
  <div class="gap-4"></div>
  <div class="status-response-section brand-seventh-bg pad-x-6 box-shadow"></div>
  <div class="gap-4"></div>
[/templates.add]

[templates.add select_action]
  
  [template.set_array option.new label="DC Ready" value="DC Ready" /]
  [template.set_array option.new label="Need More Training" value="Hold" /]
  
  <div class="col-lg-8 action-wrapper">
    <div class="floating-label form-group no-margin-bottom">
      <select class="form-control select_field lead_axn">
        <option value="" selected="" disabled="">Select Action</option>
        [loop.@op template.option]
          <option value='[aw2.get @op.item.label /]'
          [if.equal lhs='{single_data.dp_meta.dp_state}' rhs='{@op.item.value}']
          	selected
          [/if.equal]
          >[aw2.get @op.item.label /]</option>
        [/loop.@op]
      </select>
    </div>
  </div>

  [session_ticket.create nonce=yes o.set=template.ticket/]
  [session_ticket.set_activity {template.ticket} app=training module="{aw2.get module.slug}.updateStatus" /] 

  <script type="spa/axn" axn="core.run_script">
      $(".select_field").SumoSelect({search: true, searchText: 'Enter here.'});
      $(".lead_axn.SumoUnder").change(function(){
        $(this).parents(".floating-label").find(".sumo-label").show();
        $(this).parents(".floating-label").find(".CaptionCont").css({"padding-top":"1.25rem","padding-bottom":".55rem"});
        spa.loader.show();
        spa.route.run({
        	route_ajax: 't/[template.ticket/]/' + $(this).val(),
          block:{
          	params:{
              dp_id: "[aw2.get single_data.dp_id /]",
              status: $(this).val()
            }
          }
        }).then(function(){spa.loader.hide()});
      });
    </script>
  
[/templates.add]

[templates.add updateStatus]

	[if.equal lhs='{request.status}' rhs='DC Ready']
    [aw2.set template.statuses="completed-lead-software-training,completed-mock-proposal,completed-shadow-lead-meeting,completed-delta-cadd-training" /]
    
    [loop.@i template.statuses.comma]
  
      [dp.add_comm
          dp_id='{request.dp_id}'
          dp_comm_title='DP Status Changed'
          dp_comm_status='{@i.item}'
          set='template.comm_res'
      /]

      [dp.add_process
          dp_id='{request.dp_id}'
          activity='DP Status Changed to {@i.item}'
          set='template.process_res'
      /]
      
    [/loop.@i]
    [template.set_array meta.new meta_key='dp_state' meta_value='{request.status}' /]
    [dp.update meta='{template.meta}' dp_id='{request.dp_id}' set=template.res /]
    <script type="spa/axn" axn="core.run_script">
        spa.manage_api.single_refresh().then(function(){
          spa.manage_api.alert({message:'DP Status Successfully Updated',type:'success'});
        });
    </script>
  [/if.equal]
  [if.else]
  	//** if need more training reset to signed agreement **//
  	//** [aw2.set template.statuses="signed-agreement" /] **//
    [templates.run needMoreTraining /]
  [/if.else]
  
[/templates.add]

[templates.add needMoreTraining]
	[query.get_post post_type='notification_tpl' post_slug='dp-status-need-more-training' set='module.mail' /]
  [dp.get_meta dp_id='{request.dp_id}' set=template.dp_meta /]
	<template axn="selector.update" selector='.status-response-section' get="me.html">
  	<div class="gap-4"></div>
    <h3 class="font-size-large font-semibold">Email Preview</h3>
    <div class="gap-4"></div>
    <div class="email-prv-box gray-white-bg br pad-7">
      [do.notify_data]
        [aw2.set notify_data.name='{template.dp_meta.name}' /]
        [aw2.set notify_data.more_trn_reason='Need More Training' /]
        [module.mail.parse_content.run /]
      [/do.notify_data]
    
    </div>
    <div class="gap-6"></div>
    
    <h3 class="font-size-large font-semibold">Need More Training Reason</h3>
    <div class="form-group floating-label textarea-floating">
      <textarea class="pad-3 width-100 notes-textarea form-control need-more-trn-input" name='need_more_trn_note' id='status_need_more_trn_note' required="required" placeholder="Need More Training Reason"></textarea>
      <label>Need More Training Reason</label>
    </div>
    <div class='brand-warning status_need_more_trn_note-help-block'></div>
    <div class="gap-6"></div>

    [single_service.ticket.generate
      service_type="m_training"
      mod="{module.slug}"
      tpl='need_more_trn_submit'
      set=template.ticket_id
    /]
    
    <script type="spa/axn" axn="core.run_script">
      $('.status-submit').click(function(){
        if(!$('#status_need_more_trn_note').val()){
          $('.status_need_more_trn_note-help-block').text('Field is required.')
          e.preventDefault();
          return false;
        }else{
          $('.status_need_more_trn_note-help-block').text('')
        }
      });
    </script>

    <button
      class='btn btn-primary status-submit'
      axn="route.run"
      bind="click"
      dp_email="[aw2.get template.dp_meta.email /],[aw2.get template.dp_meta.personal_email default='{template.dp_meta.email}' /]"
      dp_name='[aw2.get template.dp_meta.name /]'
      dp_id='[aw2.get template.dp_meta.dp_id /]'
      ajax_selector='#status_need_more_trn_note'
      disable_selector=".status_need_more_trn_note-help-block"
      route_ajax='t/[template.ticket_id /]'
      confirmation='Are you sure?'
    >Submit</button>

    <div class="gap-6"></div>
  </template>
[/templates.add]

[templates.add need_more_trn_submit]
  [template.set_array meta.new meta_key='dp_state' meta_value='Hold' /]
  [template.set_array meta.new meta_key='dp_state_hold_reason' meta_value='{request.need_more_trn_note}' /]
  [dp.update meta='{template.meta}' dp_id='{request.dp_id}' set=template.res /]
  
  [template.set args='' /]
  [template.set args.activity="email" /]
  [template.set args.name='{request.dp_name}' /]
  [template.set args.more_trn_reason='{request.need_more_trn_note}' /]
  [template.set args.email='{request.dp_email}' /]
  [template.set args.mail_template='dp-status-need-more-training' /]
  [template.set args.email_layout='common_layout' /]
  [common.send-notifications args={template.args} o.set=template.email_res /]
  [dp.add_comm
      dp_id='{request.dp_id}'
      dp_comm_title='DP Status Changed to Hold/Need More Training'
      dp_comm_status='Hold'
      set='template.comm_res'
  /]
  <script type="spa/axn" axn="core.run_script">
    spa.manage_api.single_refresh().then(function(){
    	spa.manage_api.alert({message:'Dp status successfully updated to Need More Training',type:'success'});
    });
  </script>
[/templates.add]]]></content:encoded>
		<excerpt:encoded><![CDATA[]]></excerpt:encoded>
		<wp:post_id>866305</wp:post_id>
		<wp:post_date><![CDATA[2020-10-15 10:54:42]]></wp:post_date>
		<wp:post_date_gmt><![CDATA[2020-10-15 05:24:42]]></wp:post_date_gmt>
		<wp:post_modified><![CDATA[2020-10-20 13:16:50]]></wp:post_modified>
		<wp:post_modified_gmt><![CDATA[2020-10-20 07:46:50]]></wp:post_modified_gmt>
		<wp:comment_status><![CDATA[closed]]></wp:comment_status>
		<wp:ping_status><![CDATA[closed]]></wp:ping_status>
		<wp:post_name><![CDATA[action-block]]></wp:post_name>
		<wp:status><![CDATA[publish]]></wp:status>
		<wp:post_parent>0</wp:post_parent>
		<wp:menu_order>0</wp:menu_order>
		<wp:post_type><![CDATA[m_training]]></wp:post_type>
		<wp:post_password><![CDATA[]]></wp:post_password>
		<wp:is_sticky>0</wp:is_sticky>
														<wp:postmeta>
		<wp:meta_key><![CDATA[_edit_last]]></wp:meta_key>
		<wp:meta_value><![CDATA[68]]></wp:meta_value>
		</wp:postmeta>
							</item>
					<item>
		<title><![CDATA[assessment]]></title>
		<link>https://awxdocs.com/?post_type=m_training&#038;p=866307</link>
		<pubDate>Thu, 15 Oct 2020 05:25:05 +0000</pubDate>
		<dc:creator><![CDATA[abhishek B]]></dc:creator>
		<guid isPermaLink="false">https://awxdocs.com/?post_type=m_training&#038;p=866307</guid>
		<description></description>
		<content:encoded><![CDATA[[templates.add main]

	[template.set dp_id={qs.0} /]
	[query.get_results set='template.submission']
  	SELECT * FROM `training_meta` where coll_type='training_submission' and coll_id='[template.dp_id/]' 
  [/query.get_results]
  
  <div class="pad-4-5">
  
  	[if.empty template.submission]
    	[template.set msg]
      	<div class='is-flex justify-content-center'>
        	<h3 class='brand-danger'>No Training Data Found</h3>
        </div>
      [/template.set]
      [template.return template.msg/]
    [/if.empty]
    
    [training.get.activeTrainingModules set='template.modules'/]
    [dp.get_meta dp_id={template.dp_id} set=template.dp_meta/]
    [template.set final_complete_at=''/]
    
    [loop.@i template.modules]

        [training.get.userTraining object_id="{aw2.get @i.item.object_id}" dp_id="{template.dp_meta.dp_id}" set=template.single/] 
        [if.true @i.last] [template.set final_complete_at='{template.single.module_completed_at}'/] [/if.true] 
        [aw2.set module.ratings_count='{module.ratings_count default=0} + {template.single.training_rating default=0}' /]    

    [/loop.@i]
    
    [if.empty template.final_complete_at]
    	[template.set msg]
      	<div class='is-flex justify-content-center'>
        	<h4 class='brand-danger'>Trainng Module for this Partner is Incomplete</h4>
        </div>
      [/template.set]
      [template.return template.msg/]
    [/if.empty]
    
    [do.single_data]
    
    		[lead.get_meta lead_id={template.dp_meta.lead_id} set=template.lead_meta /]  
        [template.lead_meta set='single_data.lead_meta' /]
        [template.dp_meta set='single_data.dp_meta' /]
        [template.dp_id set='single_data.dp_id' /]
        [template.modules set='single_data.modules' /]
        [template.final_complete_at set='single_data.final_complete_at' /]
        [module.ratings_count set='single_data.ratings_count' /]
        
        [common_objects.partner-personal-info /]
        [this_collection.action-block /]
        [templates.display_ratings /]
        //**
        	commenting based on http://dc.wordpoets.com/plot/task/tsk16803230408603123950697
        	[training.vertical-training-timeline/]
        **//
        
    [/do.single_data]
  </div>
  
[/templates.add]

[templates.add display_ratings]
	
	[css.style]
  	.custom-icon {
      height: 18px;
      width: 18px;
      display: inline-block;
      background-color: black;
      color: white;
      font-size: 20px;
      line-height: 15px;
      text-align: center;
    }

    .plus::before {
      content: "+";
    }
    .minus::before {
      content: "-";
    }
  	.rating-section ul li{
      position:relative;
    }
    .rating-section ul li::before {
      content: '';
      position: absolute;
      border-bottom: 1px solid;
      width: 7px;
      height: 10px;
      top: 1px;
      left: -15px;
    }
    .icon-star-outline{
      cursor:pointer;
    }
    .notes-textarea{
      resize:none;
      height:125px;
    }
    .textarea-floating{
      height:125px;
    }
    .rate-slide{
      cursor:pointer;
    }
    .training-slide{
      cursor:pointer;
    }
    .brand-warning {
      color: #eabf23;
    }
    .icon-star-outline:hover{
      color: #eabf23;
    }
    .trn-rating{
    	border-top: 0 !important;
      border-right: 0 !important;
      border-left: 0 !important;
      border-radius: 0 !important;
      padding-left: 40px;
      outline-style: none;
      box-shadow: none;
    }
  [/css.style]
  
  [php.count p1={single_data.modules} set='template.total_modules' /]
  [module.set avg_trn_rating='{single_data.ratings_count.math default=0} / {template.total_modules}' /]
  [php.round p1={module.avg_trn_rating.math} p2=2 set='template.avg_trn_ratings'/]
  
  <div class='gap-2'></div>
  <div class="box-shadow">
    <div class="row align-items-center brand-seventh-bg is-flex no-margin pad-y-6 pad-x-2 training-slide">
    	<div class="col-12 is-flex justify-content-between">
				<h3 class="font-size-large font-bold">Training Assessment</h3>
        <p class="font-size-large no-margin">Average Rating ([template.avg_trn_ratings/]) <i class="custom-icon plus"></i></p>
      </div>
      <div class="col-12 is-flex justify-content-between">
      	<p class="no-margin">Training Completed on [aw2.get single_data.final_complete_at date_format='d-m-Y h:i a'/]</p>
      </div>
    </div>
    <form id="assessment-form" class="row brand-seventh-bg pad-4 rating-form training-content no-margin" style='display: none;'>
      [loop.@i single_data.modules]
      		[training.get.userTraining object_id="{aw2.get @i.item.object_id}" dp_id="{single_data.dp_id}" set=template.single/]
          <input type="hidden" name="obid[]" value="[template.single.object_id /]"/>
          <input type="hidden" name="dp_id" value="[aw2.get single_data.dp_id /]"/>
      		<div class="col-xl-9 col-md-8 rating-section">
              <h4 class="font-size-base font-bold">[aw2.get @i.item.module_title /]</h4>
              <p>Module Completed at: [aw2.get template.single.module_completed_at date_format='d-m-Y h:i a'/]</p>
          </div>
          <div class="col-xl-3 col-md-4 justify-content-md-end is-flex align-items-center rating-wrapper rating-wrapper-[aw2.get @i.item.object_id /]">
            <div class="is-inline-block text-center">
              <input
              type="number" 
              class='width-50 trn-rating'
              name='training_rating[]' 
              value='[aw2.get template.single.training_rating /]' />
            </div>
          </div>
          <div class="col-md-12">
            <div class="br-bottom mar-b-8"></div>
          </div>
      [/loop.@i]
      [if.not_empty single_data.final_complete_at]
        <div class="col-12 is-flex justify-content-end">
          <button type="submit" class="btn btn-primary btn-trn-rating">
            Save Rating
          </button>
        </div>
      [/if.not_empty]
    </form>
    
    [session_ticket.create nonce=yes o.set=template.ticket/]
  	[session_ticket.set_activity {template.ticket} app=training module="{aw2.get module.slug}.saveRatings" /] 
  	<script type="spa/axn"
      axn='form_upload.ajax'
      bind='submit'
      bind_selector='#assessment-form'
      route_ajax= 't/[template.get ticket/]'
      disable_selector='.btn-trn-rating'
    ></script>
   </div>
  <div class="gap-6"></div>
  
  <script type="spa/axn" axn="core.run_script">
    $(".training-slide").click(function(){
        $(this).next('.training-content').slideToggle('2000');
        $(this).find('.custom-icon').toggleClass("plus minus");
        if($(this).find('.custom-icon').hasClass('minus')){
          $('html, body').animate({
            scrollTop: $(this).next(".training-content").offset().top
          }, 2000);
        }
    });
  </script>
[/templates.add]

[templates.add saveRatings]
  [loop.@i request.training_rating]
  	[aw2.get request.obid.{@i.key} set=template.object_id/]
    [aw2.get @i.item set=template.rating/]
  
  	[template.set_array details.new meta_key='training_rating' meta_value='{template.rating}' /]
  	[training.activities.rate_training meta="{template.details}" dp_id={request.dp_id} object_id="{template.object_id}" set='template.update_ack'/]
  [/loop.@i]
  
	<script type="spa/axn" axn="core.run_script">
      //spa.manage_api.single_refresh().then(function(){
       spa.manage_api.alert({message:'Successfull! Now You can change status to Active on partner page.' , type:'success'});
       setTimeout(function(){ 
       		location.reload();
       }, 3000);
      //});
  </script>
  
[/templates.add]]]></content:encoded>
		<excerpt:encoded><![CDATA[]]></excerpt:encoded>
		<wp:post_id>866307</wp:post_id>
		<wp:post_date><![CDATA[2020-10-15 10:55:05]]></wp:post_date>
		<wp:post_date_gmt><![CDATA[2020-10-15 05:25:05]]></wp:post_date_gmt>
		<wp:post_modified><![CDATA[2020-10-15 16:05:55]]></wp:post_modified>
		<wp:post_modified_gmt><![CDATA[2020-10-15 10:35:55]]></wp:post_modified_gmt>
		<wp:comment_status><![CDATA[closed]]></wp:comment_status>
		<wp:ping_status><![CDATA[closed]]></wp:ping_status>
		<wp:post_name><![CDATA[assessment]]></wp:post_name>
		<wp:status><![CDATA[publish]]></wp:status>
		<wp:post_parent>0</wp:post_parent>
		<wp:menu_order>0</wp:menu_order>
		<wp:post_type><![CDATA[m_training]]></wp:post_type>
		<wp:post_password><![CDATA[]]></wp:post_password>
		<wp:is_sticky>0</wp:is_sticky>
														<wp:postmeta>
		<wp:meta_key><![CDATA[_edit_last]]></wp:meta_key>
		<wp:meta_value><![CDATA[68]]></wp:meta_value>
		</wp:postmeta>
							</item>
					<item>
		<title><![CDATA[logs]]></title>
		<link>https://awxdocs.com/?post_type=m_training&#038;p=866309</link>
		<pubDate>Thu, 15 Oct 2020 05:25:26 +0000</pubDate>
		<dc:creator><![CDATA[abhishek B]]></dc:creator>
		<guid isPermaLink="false">https://awxdocs.com/?post_type=m_training&#038;p=866309</guid>
		<description></description>
		<content:encoded><![CDATA[[templates.add main]
  [template.set object_id="{qs.0}" /]
  [templates.run get_manage_screen object_id="{template.object_id}" /] 
 	
[/templates.add]

[templates.add get_manage_screen]
  [training.get.metaKeys object_id='{template.object_id}' set=template.meta /]
  [template.set action_slug={template.meta.action_slug} /]
  
  [if.equal lhs='{template.action_slug}' rhs='submit-request']
		[module.set_array args]
    [after_submit raw]
      [query]
      	//**[atts debug_dataset=yes /]**//
        [pagesize]10[/pagesize]
        [offset][request.get start /][/offset]
        [query_count]yes[/query_count]
        [with]
          [sql]
          	select object_id as data_id, coll_id as dp_id from training_meta where coll_type='training_submission'
            and meta_key='parent_object_id' and meta_value='[request.get training_id /]' 
          [/sql]
          
          [filter new] 
            [sql raw]
                SELECT [module.previous_query_no /].*, meta_value as name FROM [module.previous_query_no /] join dp_meta ON [module.previous_query_no /].dp_id = dp_meta.object_id and coll_type='profile' and coll_id='dp' and meta_key in ('name', 'city') 
            [/sql]
          [/filter]
          
        [/with]
        [transform ref_id=data_id /]
        [meta new]
          [table]training_meta[/table]
[aw2_collection_keys]module_status,module_completed_at,created_datetime,tentative_date,tentative_time_slot[/aw2_collection_keys]
        [/meta]

      	[meta new]
          [table]dp_meta[/table]
          [aw2_collection_keys]name,city,dp_id[/aw2_collection_keys]
          [ref_id]dp_id[/ref_id]
        [/meta]
        [order] data_id DESC [/order]
      [/query]
      [table]
        [column new label='Name' meta_key='name' class='no-sort']
          [calc]
            let qs = '[env.get server_variables.QUERY_STRING/]';
            if(row.module_status == 'completed' && qs == 'l=yes')
              return "<a href='[aw2.get url.site/]training/assessment/" + row.dp_id + "' class='row-single-point'>"+ data +"</a>"
            return data;
          [/calc]
        [/column]
        [column new label='City' meta_key='city' class='no-sort'][/column]
        [column new label='Module Status' meta_key='module_status' class='no-sort' /]
        [column new label='Module Done at' meta_key='created_datetime' class='no-sort']
          [calc]
            	return spa.manage_api.manage_date(data, true, false);
          [/calc]
        [/column]
        [column new label='Module Completed at' meta_key='module_completed_at' class='no-sort']
          [calc]
            return spa.manage_api.manage_date(data, true, false);
          [/calc]
        [/column]
        [column new label='Tentative Date' meta_key='tentative_date' class='no-sort' hide_in_table='{request.get tentative_date}' /]
        [column new label='Time Slot' meta_key='tentative_time_slot' class='no-sort' hide_in_table='{request.get time_slot}' /]
      [/table]
      [datascript]
        function(d){
          d.start_date= spa.manage_api.filters.overview.start_date,
          d.end_date= spa.manage_api.filters.overview.end_date,
          d.generic= spa.manage_api.filters.overview.generic,
          d.training_id= spa.manage_api.training_id,
          d.view= spa.manage_api.filters.overview.view
        }
      [/datascript]
    [/after_submit]
  [/module.set_array]
  [/if.equal]
  [if.equal lhs='{template.action_slug}' rhs='watch-demo-upload-material']
		[module.set_array args]
    [after_submit raw]
      [query]
      	//**[atts debug_dataset=yes /]**//
        [pagesize]10[/pagesize]
        [offset][request.get start /][/offset]
        [query_count]yes[/query_count]
        [with]
        	
          [sql]
          	select object_id as data_id, coll_id as dp_id from training_meta where coll_type='training_submission'
            and meta_key='parent_object_id' and meta_value='[request.get training_id /]' 
          [/sql]
          
          [filter new] 
            [sql raw]
                SELECT [module.previous_query_no /].*, meta_value as name FROM [module.previous_query_no /] join dp_meta ON [module.previous_query_no /].dp_id = dp_meta.object_id and coll_type='profile' and coll_id='dp' and meta_key in ('name', 'city') 
            [/sql]
          [/filter]
          
        [/with]
        [transform ref_id=data_id /]
        [meta new]
          [table]training_meta[/table]
          [aw2_collection_keys]module_status,module_completed_at,created_datetime,mockup_url[/aw2_collection_keys]
        [/meta]

      	[meta new]
          [table]dp_meta[/table]
          [aw2_collection_keys]name,city,dp_id[/aw2_collection_keys]
          [ref_id]dp_id[/ref_id]
        [/meta]
        [order] data_id DESC [/order]
      [/query]
      [table]
        [column new label='Name' meta_key='name' class='no-sort']
          [calc]
            let qs = '[env.get server_variables.QUERY_STRING/]';
            if(row.module_status == 'completed' && qs == 'l=yes')
              return "<a href='[aw2.get url.site/]training/assessment/" + row.dp_id + "' class='row-single-point'>"+ data +"</a>"
            return data;
          [/calc]
        [/column]
        [column new label='City' meta_key='city' class='no-sort'][/column]
        [column new label='Module Status' meta_key='module_status' class='no-sort' /]
        [column new label='Module Done at' meta_key='created_datetime' class='no-sort']
          [calc]
            	return spa.manage_api.manage_date(data, true, false);
          [/calc]
        [/column]
        [column new label='Module Completed at' meta_key='module_completed_at' class='no-sort']
          [calc]
            return spa.manage_api.manage_date(data, true, false);
          [/calc]
        [/column]
        [column new label='Uploaded Mockup' meta_key='mockup_url' class='no-sort']
          [calc]
            return "<a href='" + row.mockup_url + "' class='row-single-point'>View</a>"
          [/calc]
        [/column]
      [/table]
      [datascript]
        function(d){
          d.start_date= spa.manage_api.filters.overview.start_date,
          d.end_date= spa.manage_api.filters.overview.end_date,
          d.generic= spa.manage_api.filters.overview.generic,
          d.training_id= spa.manage_api.training_id,
          d.view= spa.manage_api.filters.overview.view
        }
      [/datascript]
    [/after_submit]
  [/module.set_array]
  [/if.equal]
  [if.equal lhs='{template.action_slug}' rhs='watch-demo']
  [/if.equal]
  [if.or cond='{template.action_slug}' equal='read-review']
  	[module.set_array args]
    [after_submit raw]
      [query]
      	//**[atts debug_dataset=yes /]**//
        [pagesize]10[/pagesize]
        [offset][request.get start /][/offset]
        [query_count]yes[/query_count]
        [with]
        	
          [sql]
          	select object_id as data_id, coll_id as dp_id from training_meta where coll_type='training_submission'
            and meta_key='parent_object_id' and meta_value='[request.get training_id /]' 
          [/sql]
          
          [filter new] 
            [sql raw]
                SELECT [module.previous_query_no /].*, meta_value as name FROM [module.previous_query_no /] join dp_meta ON [module.previous_query_no /].dp_id = dp_meta.object_id and coll_type='profile' and coll_id='dp' and meta_key in ('name', 'city') 
            [/sql]
          [/filter]
          
        [/with]
        [transform ref_id=data_id /]
        [meta new]
          [table]training_meta[/table]
          [aw2_collection_keys]module_status,module_completed_at,created_datetime[/aw2_collection_keys]
        [/meta]

      	[meta new]
          [table]dp_meta[/table]
          [aw2_collection_keys]name,city,dp_id[/aw2_collection_keys]
          [ref_id]dp_id[/ref_id]
        [/meta]
        [order] data_id DESC [/order]
      [/query]
      [table]
        [column new label='Name' meta_key='name' class='no-sort']
          [calc]
            let qs = '[env.get server_variables.QUERY_STRING/]';
            if(row.module_status == 'completed' && qs == 'l=yes')
              return "<a href='[aw2.get url.site/]training/assessment/" + row.dp_id + "' class='row-single-point'>"+ data +"</a>"
            return data;
          [/calc]
        [/column]
        [column new label='City' meta_key='city' class='no-sort'][/column]
        [column new label='Module Status' meta_key='module_status' class='no-sort' /]
        [column new label='Module Done at' meta_key='created_datetime' class='no-sort']
          [calc]
            	return spa.manage_api.manage_date(data, true, false);
          [/calc]
        [/column]
        [column new label='Module Completed at' meta_key='module_completed_at' class='no-sort']
          [calc]
            return spa.manage_api.manage_date(data, true, false);
          [/calc]
        [/column]
      [/table]
      [datascript]
        function(d){
          d.training_id= spa.manage_api.training_id
        }
      [/datascript]
    [/after_submit]
  [/module.set_array]
  [/if.or]
  
  <script type="spa/axn" axn="core.run_script">
		spa.manage_api.training_id = '[template.get object_id /]';
	</script>
  
  <section>
      <div class="pad-4-5">
      <div class="row col-md-12 mar-b-3">
        <div class="col-md-6">
          <h1 class="font-size-larger font-bold"> Training Logs - [template.meta.module_title/]</h1>
        </div>
      </div>
      <div class="row col-md-12">	
        <div class="map-container col-md-12 ihp-content division-details">
          <div class="gap-8 br-top"></div> 
          <div class="brand-white-bg pad-7 table-main box-shadow box-shadow-bottom manage-table-wrapper">
            [manage_service.manage-table args='{module.args}' /]
          </div>
         <div class="gap-8"></div>
        </div>
      </div>
    </div>
  </section>

[/templates.add]

]]></content:encoded>
		<excerpt:encoded><![CDATA[]]></excerpt:encoded>
		<wp:post_id>866309</wp:post_id>
		<wp:post_date><![CDATA[2020-10-15 10:55:26]]></wp:post_date>
		<wp:post_date_gmt><![CDATA[2020-10-15 05:25:26]]></wp:post_date_gmt>
		<wp:post_modified><![CDATA[2020-10-15 10:55:26]]></wp:post_modified>
		<wp:post_modified_gmt><![CDATA[2020-10-15 05:25:26]]></wp:post_modified_gmt>
		<wp:comment_status><![CDATA[closed]]></wp:comment_status>
		<wp:ping_status><![CDATA[closed]]></wp:ping_status>
		<wp:post_name><![CDATA[logs]]></wp:post_name>
		<wp:status><![CDATA[publish]]></wp:status>
		<wp:post_parent>0</wp:post_parent>
		<wp:menu_order>0</wp:menu_order>
		<wp:post_type><![CDATA[m_training]]></wp:post_type>
		<wp:post_password><![CDATA[]]></wp:post_password>
		<wp:is_sticky>0</wp:is_sticky>
														<wp:postmeta>
		<wp:meta_key><![CDATA[_edit_last]]></wp:meta_key>
		<wp:meta_value><![CDATA[68]]></wp:meta_value>
		</wp:postmeta>
							</item>
					<item>
		<title><![CDATA[get_action_type]]></title>
		<link>https://awxdocs.com/?post_type=m_training&#038;p=866311</link>
		<pubDate>Thu, 15 Oct 2020 05:25:45 +0000</pubDate>
		<dc:creator><![CDATA[abhishek B]]></dc:creator>
		<guid isPermaLink="false">https://awxdocs.com/?post_type=m_training&#038;p=866311</guid>
		<description></description>
		<content:encoded><![CDATA[[templates.add main]
		//** if action type is empty return empty resposne **//
    <template selector='.tt_response' axn="selector.replace" get="me.html"> 
      [if.empty module.request.action_slug]
          <div class="tt_response"></div>
      [/if.empty]
      [if.else]
        [query.get_term_by field="slug" value="{module.request.action_slug}" taxonomy="training_types" set="template.taxo"/]
        [template.taxo.slug set="template.slug"/]
        
          //**Request Field**//
         [if.equal lhs="{template.slug}" rhs="submit-request"]

            [query.get_terms taxonomies='training_types' parent='{template.taxo.term_id}' hide_empty=0 set="template.child" /]
            <div class="form_slug col-md-6 form-group tt_response">
                <div class="field-wrapper selected">
                    <select class="form-control" name="form_slug" id="form_slug" >
                      [loop.@i template.child]
                        <option value="[aw2.get @i.item.slug /]">[aw2.get @i.item.name /]</option>
                      [/loop.@i]
                    </select>
                    <label for="form_slug">Select Submit Request Form</label>    
                </div>
                <p class="help-block"></p>
            </div>
            <script type="spa/axn" axn="core.run_script">
              $(function(){
                $('#form_slug option[value="[module.request.form_slug/]"]').attr('selected','selected');
              });
            </script>

          [/if.equal]

          //**Read and Review Field**//
          [if.equal lhs="{template.slug}" rhs="read-review"]

              <div class="read_review_file  form-group col-12 tt_response">
                <label for="read_review_file">Upload File for Read/Review
                [if.not_empty request.action_url]
                  - <a href="[module.request.action_url/]" target="_blank" rel="noopener noreferrer">View</a>
                [/if.not_empty]
                </label> 
                <input type="file" name="read_review_file" class="mar-t-4 form-control" id="read_review_file" required/>
                <p class="brand-danger font-size-smallest text-left read_review_file_error help-block"></p>
              </div>

          [/if.equal]

          //**Watch Demo Field**//
          [if.equal lhs="{template.slug}" rhs="watch-demo"]

              <div class="action_url col-md-6 form-group tt_response">
                  <div class="field-wrapper">
                    <input type="text" value="[module.request.action_url/]" class="form-control" placeholder="URL for Watch Demo" required="" name="action_url">
                    <label>URL for Watch Demo</label>
                  </div>
                  <p class="font-size-smallest mar-t-1 no-margin-bottom"></p>
                  <p class="help-block"></p>
              </div>

          [/if.equal]

          //**Watch Demo and Upload Material Field**//
          [if.equal lhs="{template.slug}" rhs="watch-demo-upload-material"]

              <div class="tt_response" style="display: contents;">
                <div class="action_url col-md-6 form-group">
                    <div class="field-wrapper">
                      <input type="text" value="[module.request.action_url/]" class="form-control" placeholder="URL for Watch Demo" required="" name="action_url">
                      <label>URL for Watch Demo</label>
                    </div>
                    <p class="font-size-smallest mar-t-1 no-margin-bottom"></p>
                    <p class="help-block"></p>
                </div>
                <div class="material_url  form-group col-12">
                  <label for="material_url">Upload Material
                  [if.not_empty module.request.material_url]
                    - <a href="[module.request.material_url/]" target="_blank" rel="noopener noreferrer">View</a>
                  [/if.not_empty]
                  </label> 
                  <input type="file" name="material_url" class="mar-t-4 form-control" id="material_url" required/>
                  <p class="brand-danger font-size-smallest text-left material_url_error help-block"></p>
                </div>
              </div>

          [/if.equal]

          //**
            remove action_url key from actionParams in edit-training-module in onchange
            after loading page to avoid action_url conflct with fields
          **//
          <script type="spa/axn" axn="core.run_script">
            $(function(){
              //$('.training_type').removeAttr('action_url');
              delete spa.actionParams['action_url'];
            });
          </script>
        [/if.else]
    </template>
    
[/templates.add]]]></content:encoded>
		<excerpt:encoded><![CDATA[]]></excerpt:encoded>
		<wp:post_id>866311</wp:post_id>
		<wp:post_date><![CDATA[2020-10-15 10:55:45]]></wp:post_date>
		<wp:post_date_gmt><![CDATA[2020-10-15 05:25:45]]></wp:post_date_gmt>
		<wp:post_modified><![CDATA[2020-10-15 10:55:45]]></wp:post_modified>
		<wp:post_modified_gmt><![CDATA[2020-10-15 05:25:45]]></wp:post_modified_gmt>
		<wp:comment_status><![CDATA[closed]]></wp:comment_status>
		<wp:ping_status><![CDATA[closed]]></wp:ping_status>
		<wp:post_name><![CDATA[get_action_type]]></wp:post_name>
		<wp:status><![CDATA[publish]]></wp:status>
		<wp:post_parent>0</wp:post_parent>
		<wp:menu_order>0</wp:menu_order>
		<wp:post_type><![CDATA[m_training]]></wp:post_type>
		<wp:post_password><![CDATA[]]></wp:post_password>
		<wp:is_sticky>0</wp:is_sticky>
														<wp:postmeta>
		<wp:meta_key><![CDATA[_edit_last]]></wp:meta_key>
		<wp:meta_value><![CDATA[68]]></wp:meta_value>
		</wp:postmeta>
							</item>
					<item>
		<title><![CDATA[show-training-module]]></title>
		<link>https://awxdocs.com/?post_type=m_training&#038;p=866313</link>
		<pubDate>Thu, 15 Oct 2020 05:26:04 +0000</pubDate>
		<dc:creator><![CDATA[abhishek B]]></dc:creator>
		<guid isPermaLink="false">https://awxdocs.com/?post_type=m_training&#038;p=866313</guid>
		<description></description>
		<content:encoded><![CDATA[[templates.add main]
  [css.style]
  	.sme-action a {
    	font-size:15px;
    }
  [/css.style]
  
  [template.set object_id="{qs.0}" /]
  [training.get.metaKeys object_id="{template.object_id}" set=template.module/]
	<section class="fdb-block" role='xyz-form'>
  	<div class="container">
        <div class="row justify-content-center ">    
          <div class="col-md-6 " id="after-delete-res">
            <h1 class="font-size-larger font-bold is-flex justify-content-between">
              [template.module.module_title/] 
              [session_ticket.create nonce=yes set=module.ticket_id /]
              [session_ticket.set_activity {module.ticket_id} app="training" module="{module.slug}.deleteModule" /]
              <span class='sme-action'>
              	<a href="#" class="del-m"> <i class="icon icon-trash"></i> Delete</a>
              		<a href="[app.path /]/edit-training-module/[template.module.object_id]">
                    <i class="icon icon-edit"></i> 
                    Edit
                  </a>
              </span>
            </h1>
          	<div class="row">
            	<div class="col-md-6">
              	<div class="form-group">
                  <label>Module Name</label>
                  <p>[template.module.module_title/]</p>
                </div>
              </div>
              <div class="col-md-6">
                <div class="form-group">
                  <label>Module Time</label>
                  <p>[template.module.module_days/] Days and [template.module.module_hrs/] hours</p>
                </div>
              </div>
              
              <div class="col-md-6">
                <div class="form-group">
                  <label>Training Action</label>
                  [query.get_term_by field="slug" value="{template.module.action_slug}" taxonomy="training_types" hide_empty=0 set="template.term_name"/]
                  <p>[template.term_name.name/]</p>
                </div>
              </div>
              <div class="col-md-6">
                <div class="form-group">
                	[if.equal lhs="{template.term_name.slug}" rhs="submit-request"]
                  	<label>Form Name</label>
                  	<p>[template.module.form_slug/]</p>
                  [/if.equal]
                  [if.else]
                    <label>Action Links</label>
                    <p>
                      [if.not_empty template.module.action_url]
                      	
                      	<a href="[template.module.action_url]" target="_blank" rel="noopener noreferrer">
                        <i class="icon icon-link"></i> View </a>
                        //**<a href="javascript:void(0)" data-toggle="awmodal" data-target="#basicModal">View</a>
                        [templates.basicBody url={template.module.action_url} set="template.body" /]
  											[ui.modal.awmodal animate="true" id="basicModal" body="{template.body}" dialog_style="width:75%" /]
                        **//
                      [/if.not_empty]
                      [if.equal lhs="{template.term_name.slug}" rhs="watch-demo-upload-material"]
                        | <a href="[template.module.material_url]">Download Material</a>
                      [/if.equal]
                    </p>
                  [/if.else]
                </div>
              </div>
              <div class="col-md-6">
                <div class="form-group">
                  <label>Google Form Link</label>
                  <p><a href="[template.module.test_url/]" target="_blank" rel="noopener noreferrer">
                  <i class="icon icon-link"></i> View</a></p>
                </div>
              </div>
            </div>
            <div class="row">
            	<div class="col-md-12">
                <div class="form-group">
                  <label>Message</label>
                  <p>[template.module.action_message/]</p>
                </div>
              </div>
            </div>
          </div>
        </div>
  	</div>
  </section>
  
  <script type="spa/axn" axn="core.run_script">
  
      spa.actionParams = {
        id:'[template.module.object_id]',
      };
      $(document).on("click",'.del-m',function(e){
        e.preventDefault();
      	var check = confirm("Are you sure you want to delete?");
        if (!check) {
            return false;
        }
        spa.loader.show();
        spa.route.run({
          route_ajax: 't/[module.ticket_id /]',
          block:{
            params:spa.actionParams
          }
        }).then(function(){
          spa.loader.hide();
          
        });
      });
  
  </script>
[/templates.add]

[templates.add basicBody] 
	<div class="row justify-content-center">    
    <div class="col-md-12">
    	<iframe src="[template.url/]" style="width: 100%;border: 0;height: 300px;"></iframe>
    </div>
  </div>
[/templates.add]

//** http://dc.wordpoets.com/plot/task/tsk16790556738111214364255 **//
[templates.add deleteModule]
	
	[training.get.metaKeys object_id="{request.id}" set=template.module/]
  [template.set parent_obj_id="{template.module.parent_trm_id}" /]
  [query.query]
    delete from training_meta where object_id='[template.module.object_id/]' and coll_type='training_sub'
  [/query.query]  
 
  <template selector="#after-delete-res" axn="selector.replace" get="me.html">
    	<p class="alert alert-success">Module Deleted Successfully</p>
      <script>
      	window.location = "[app.path /]/edit-training/[template.parent_obj_id]";
      </script>
  </template>
[/templates.add]]]></content:encoded>
		<excerpt:encoded><![CDATA[]]></excerpt:encoded>
		<wp:post_id>866313</wp:post_id>
		<wp:post_date><![CDATA[2020-10-15 10:56:04]]></wp:post_date>
		<wp:post_date_gmt><![CDATA[2020-10-15 05:26:04]]></wp:post_date_gmt>
		<wp:post_modified><![CDATA[2020-10-15 10:56:05]]></wp:post_modified>
		<wp:post_modified_gmt><![CDATA[2020-10-15 05:26:05]]></wp:post_modified_gmt>
		<wp:comment_status><![CDATA[closed]]></wp:comment_status>
		<wp:ping_status><![CDATA[closed]]></wp:ping_status>
		<wp:post_name><![CDATA[show-training-module]]></wp:post_name>
		<wp:status><![CDATA[publish]]></wp:status>
		<wp:post_parent>0</wp:post_parent>
		<wp:menu_order>0</wp:menu_order>
		<wp:post_type><![CDATA[m_training]]></wp:post_type>
		<wp:post_password><![CDATA[]]></wp:post_password>
		<wp:is_sticky>0</wp:is_sticky>
														<wp:postmeta>
		<wp:meta_key><![CDATA[_edit_last]]></wp:meta_key>
		<wp:meta_value><![CDATA[68]]></wp:meta_value>
		</wp:postmeta>
							</item>
					<item>
		<title><![CDATA[edit-training-module]]></title>
		<link>https://awxdocs.com/?post_type=m_training&#038;p=866315</link>
		<pubDate>Thu, 15 Oct 2020 05:26:21 +0000</pubDate>
		<dc:creator><![CDATA[abhishek B]]></dc:creator>
		<guid isPermaLink="false">https://awxdocs.com/?post_type=m_training&#038;p=866315</guid>
		<description></description>
		<content:encoded><![CDATA[[templates.add main]
  
  [training.css/]
  
  [template.set object_id="{qs.0}" /]
  [training.get.metaKeys object_id="{template.object_id}" set=template.module/]
  
	<section class="fdb-block" role='xyz-form'>
  	<div class="container">
        <div class="row justify-content-center text-center">    
          <div class="col-md-8 ">
            <h1 class="font-size-larger font-bold">Edit [template.module.module_title/] Module </h1>
          	<div id="training-module-form" class="t-response">
            
            	[training.create_form 
                topic='add-training-module' 
                data="{template.module}" 
                mod='update_training'
                tpl='createModuleMeta'
              /]
              
          	</div>
          </div>
        </div>
  	</div>
  </section>
  
  [session_ticket.create nonce=yes o.set=template.ticket_id/]
  [session_ticket.set_activity {template.ticket_id} app=training module="{aw2.get module.slug}.getActionType" /] 

  <script type="spa/axn" axn="core.run_script">
    $(function(){
      //** append a div for action response**//
      $('.action_slug').after('<div class="tt_response"></div>');

      spa.actionParams = {
        form_slug:'[template.module.form_slug]',
        action_url:'[template.module.action_url]',
        material_url: '[template.module.material_url]'
      }
      //** on action change **//
      $('.action_slug').on("change",'select',function(){
        spa.actionParams.action_slug = $(this).val() || '';
        spa.loader.show();
        spa.route.run({
          route_ajax: 't/[template.get ticket_id /]',
          block:{
            params:spa.actionParams
          }
        }).then(function(){
          spa.loader.hide();
          toUpperCase('select[name="form_slug"] option');
          //remove required attr for input type file
          $('#read_review_file').removeAttr('required');
      		$('#material_url').removeAttr('required');
        });
      });

       //**on page refresh apply on change with value**//
      //$('.training_type').val('[template.module.action_slug/]');
      $('.training_type').trigger('change');

      toUpperCase('select[name="action_slug"] option');
    });

    // convert action and form slug options to uppercase
    function toUpperCase(ele){
      $(ele).text(function(i,s){
        var re = /(\b[a-z](?!\s))/g;
        s = s.replace(re, function(x){return x.toUpperCase();});
        return s;
      });
    }
  </script>
[/templates.add]

[templates.add getActionType]
	
	[this_collection.get_action_type request={request}/]
  
[/templates.add]
]]></content:encoded>
		<excerpt:encoded><![CDATA[]]></excerpt:encoded>
		<wp:post_id>866315</wp:post_id>
		<wp:post_date><![CDATA[2020-10-15 10:56:21]]></wp:post_date>
		<wp:post_date_gmt><![CDATA[2020-10-15 05:26:21]]></wp:post_date_gmt>
		<wp:post_modified><![CDATA[2020-10-15 10:56:21]]></wp:post_modified>
		<wp:post_modified_gmt><![CDATA[2020-10-15 05:26:21]]></wp:post_modified_gmt>
		<wp:comment_status><![CDATA[closed]]></wp:comment_status>
		<wp:ping_status><![CDATA[closed]]></wp:ping_status>
		<wp:post_name><![CDATA[edit-training-module]]></wp:post_name>
		<wp:status><![CDATA[publish]]></wp:status>
		<wp:post_parent>0</wp:post_parent>
		<wp:menu_order>0</wp:menu_order>
		<wp:post_type><![CDATA[m_training]]></wp:post_type>
		<wp:post_password><![CDATA[]]></wp:post_password>
		<wp:is_sticky>0</wp:is_sticky>
														<wp:postmeta>
		<wp:meta_key><![CDATA[_edit_last]]></wp:meta_key>
		<wp:meta_value><![CDATA[68]]></wp:meta_value>
		</wp:postmeta>
							</item>
					<item>
		<title><![CDATA[edit-training]]></title>
		<link>https://awxdocs.com/?post_type=m_training&#038;p=866317</link>
		<pubDate>Thu, 15 Oct 2020 05:26:42 +0000</pubDate>
		<dc:creator><![CDATA[abhishek B]]></dc:creator>
		<guid isPermaLink="false">https://awxdocs.com/?post_type=m_training&#038;p=866317</guid>
		<description></description>
		<content:encoded><![CDATA[[templates.add main]
  
  [training.css/]
  
  [template.set object_id="{qs.0}" /]
  [training.get.metaKeys object_id="{template.object_id}" coll_type='training' set=template.training/]
  
	<section class="fdb-block" role='xyz-form'>
  	<div class="container">
        <div class="row justify-content-center text-center t-response">  
          <div class="col-md-8" >
            <div class="row mar-b-6" >
              <div class="col-md-12 is-flex justify-content-between align-items-center">
                <h1 class="font-size-larger font-bold text-center ">
                  Edit Training
                </h1>
                <button type="button" class=" btn btn-primary moduleBtn">Add Module</button>
              </div>
            </div>
            
            [training.create_form 
              topic='add-training' 
              data="{template.training}" 
              mod='update_training'
              tpl='createTrainingMeta'
            /]
            
          </div>
          <div class="col-md-8 d-none tm-form mar-t-6">
            <h1 class="font-size-larger font-bold"> Add Module </h1>
            
          	[training.create_form 
              topic='add-training-module' 
              data="{template.training}" 
              mod='store_training'
              tpl='createModuleMeta'
            /]
            
          </div>
        </div>
  	</div>
  </section>
  
  //**Show Module Listing in Table Start**//
  [query.get_results set=template.sub]
    select * from training_meta where coll_id='[template.object_id/]' and coll_type='training_sub'
  [/query.get_results]
  
  [templates.run get_child_list object_id="{template.object_id}" /]
   //**Show Module Listing in Table End**//
   
  [session_ticket.create nonce=yes o.set=template.ticket_id/]
  [session_ticket.set_activity {template.ticket_id} app=training module="{aw2.get module.slug}.getActionType" /] 
 
  <script type="spa/axn" axn="core.run_script">
  	$(function(){
    	//** append a div for action response**//
    	$('.action_slug').after('<div class="tt_response"></div>');
      
    	$(document).on('click', '.moduleBtn', function(){
      	$('.tm-form').toggleClass('d-none');
      });
      
      //** on action change **//
      $('.action_slug').on("change",'select',function(){
        spa.loader.show();
        spa.route.run({
          route_ajax: 't/[template.get ticket_id /]',
          block:{
            params:{
              action_slug: $(this).val() || '',
            }
          }
        }).then(function(){
          spa.loader.hide();
          toUpperCase('select[name="form_slug"] option');
        });
      });
      
      toUpperCase('select[name="action_slug"] option');
    });
    
    // convert action and form slug options to uppercase
    function toUpperCase(ele){
      $(ele).text(function(i,s){
        var re = /(\b[a-z](?!\s))/g;
        s = s.replace(re, function(x){return x.toUpperCase();});
        return s;
      });
    }
  </script>
[/templates.add]

[templates.add getActionType]
	
	[this_collection.get_action_type request={request}/]
  
[/templates.add]

[templates.add get_child_list]
	[module.set_array args]
    [after_submit raw]
      [query]
      	//** [atts debug_dataset=yes /] **//
        [pagesize]10[/pagesize]
        [offset][request.get start /][/offset]
        [query_count]yes[/query_count]
        [with]
          [sql]
            SELECT distinct object_id as data_id FROM training_meta 
            where coll_id='[request.get training_id /]' and coll_type='training_sub'
          [/sql]
        [/with]
        [transform ref_id=data_id /]
        [meta new]
          [table]training_meta[/table]
          [aw2_collection_keys]object_id,order_key,module_title,module_days,module_hrs,created_by,created_datetime[/aw2_collection_keys]
          [coll_id][request.get training_id /][/coll_id]
        [/meta]
        [order] data_id DESC [/order]
      [/query]
      [table]
        [column new label='Module Name' meta_key=module_title class='no-sort']
          [calc]
            return "<a href='[app.path /]/show-training-module/" + row.object_id + "' data-id='" + row.object_id + "' class='row-single-point'>" + data + "</a>"
          [/calc]
        [/column]
        [column new label='Order Sequence' meta_key='order_key' class='no-sort' /]
        [column new label='Module Days' meta_key='module_days' class='no-sort' /]
        [column new label='Module Hours' meta_key='module_hrs' class='no-sort' /]
        [column new label='Created By' meta_key='created_by' class='no-sort' /]
        [column new label='Date/Time' meta_key='created_datetime' class='no-sort']
          [calc]
            return spa.manage_api.manage_date(data);
          [/calc]
        [/column]
      [/table]
      [datascript]
        function(d){
          d.start_date= spa.manage_api.filters.overview.start_date,
          d.end_date= spa.manage_api.filters.overview.end_date,
          d.generic= spa.manage_api.filters.overview.generic,
          d.training_id= spa.manage_api.training_id,
          d.view= spa.manage_api.filters.overview.view
        }
      [/datascript]
      [extraparams]"ordering": false[/extraparams]
    [/after_submit]
  [/module.set_array]
  
  <script type="spa/axn" axn="core.run_script">
		spa.manage_api.training_id = '[template.get object_id /]'
	</script>
  
  <section>
      <div class="pad-4-5">
      <div class="row col-md-12 mar-b-3">
        <div class="col-md-6">
          <h1 class="font-size-larger font-bold"> Modules </h1>
        </div>
      </div>
      <div class="row col-md-12">	
        <div class="map-container col-md-12 ihp-content division-details">
          <div class="gap-8 br-top"></div> 
          <div class="brand-white-bg pad-7 table-main box-shadow box-shadow-bottom manage-table-wrapper">
            [manage_service.manage-table args='{module.args}' /]
          </div>
         <div class="gap-8"></div>
        </div>
      </div>
    </div>
  </section>

[/templates.add]]]></content:encoded>
		<excerpt:encoded><![CDATA[]]></excerpt:encoded>
		<wp:post_id>866317</wp:post_id>
		<wp:post_date><![CDATA[2020-10-15 10:56:42]]></wp:post_date>
		<wp:post_date_gmt><![CDATA[2020-10-15 05:26:42]]></wp:post_date_gmt>
		<wp:post_modified><![CDATA[2020-10-15 10:56:43]]></wp:post_modified>
		<wp:post_modified_gmt><![CDATA[2020-10-15 05:26:43]]></wp:post_modified_gmt>
		<wp:comment_status><![CDATA[closed]]></wp:comment_status>
		<wp:ping_status><![CDATA[closed]]></wp:ping_status>
		<wp:post_name><![CDATA[edit-training]]></wp:post_name>
		<wp:status><![CDATA[publish]]></wp:status>
		<wp:post_parent>0</wp:post_parent>
		<wp:menu_order>0</wp:menu_order>
		<wp:post_type><![CDATA[m_training]]></wp:post_type>
		<wp:post_password><![CDATA[]]></wp:post_password>
		<wp:is_sticky>0</wp:is_sticky>
														<wp:postmeta>
		<wp:meta_key><![CDATA[_edit_last]]></wp:meta_key>
		<wp:meta_value><![CDATA[68]]></wp:meta_value>
		</wp:postmeta>
							</item>
					<item>
		<title><![CDATA[add-training]]></title>
		<link>https://awxdocs.com/?post_type=m_training&#038;p=866319</link>
		<pubDate>Thu, 15 Oct 2020 05:26:58 +0000</pubDate>
		<dc:creator><![CDATA[abhishek B]]></dc:creator>
		<guid isPermaLink="false">https://awxdocs.com/?post_type=m_training&#038;p=866319</guid>
		<description></description>
		<content:encoded><![CDATA[[templates.add main]

  [training.css/]

	<section class="fdb-block" role='xyz-form'>
  	<div class="container">
        <div class="row justify-content-center">    
    			<h1 class="col-md-12 font-size-larger font-bold text-center mar-b-6">Add New Training</h1>
          <div class="col-md-8">
          	<div class="t-response">
            
            	[training.create_form 
                  topic='add-training'
                  mod='store_training'
                  tpl='createTrainingMeta'
              /]
              
            </div>
          </div>
        </div>
  	</div>
  </section>
  
[/templates.add]]]></content:encoded>
		<excerpt:encoded><![CDATA[]]></excerpt:encoded>
		<wp:post_id>866319</wp:post_id>
		<wp:post_date><![CDATA[2020-10-15 10:56:58]]></wp:post_date>
		<wp:post_date_gmt><![CDATA[2020-10-15 05:26:58]]></wp:post_date_gmt>
		<wp:post_modified><![CDATA[2020-10-15 14:31:49]]></wp:post_modified>
		<wp:post_modified_gmt><![CDATA[2020-10-15 09:01:49]]></wp:post_modified_gmt>
		<wp:comment_status><![CDATA[closed]]></wp:comment_status>
		<wp:ping_status><![CDATA[closed]]></wp:ping_status>
		<wp:post_name><![CDATA[add-training]]></wp:post_name>
		<wp:status><![CDATA[publish]]></wp:status>
		<wp:post_parent>0</wp:post_parent>
		<wp:menu_order>0</wp:menu_order>
		<wp:post_type><![CDATA[m_training]]></wp:post_type>
		<wp:post_password><![CDATA[]]></wp:post_password>
		<wp:is_sticky>0</wp:is_sticky>
														<wp:postmeta>
		<wp:meta_key><![CDATA[_edit_last]]></wp:meta_key>
		<wp:meta_value><![CDATA[68]]></wp:meta_value>
		</wp:postmeta>
							</item>
					<item>
		<title><![CDATA[home]]></title>
		<link>https://awxdocs.com/?post_type=m_training&#038;p=866321</link>
		<pubDate>Thu, 15 Oct 2020 05:27:15 +0000</pubDate>
		<dc:creator><![CDATA[abhishek B]]></dc:creator>
		<guid isPermaLink="false">https://awxdocs.com/?post_type=m_training&#038;p=866321</guid>
		<description></description>
		<content:encoded><![CDATA[[templates.add main]
[query.get_results set=template.res]
    select * from training_meta where coll_type = 'training'
[/query.get_results]
  
  [module.set_array args]
    [after_submit raw]
      [query]
        [pagesize]10[/pagesize]
        [offset][request.get start /][/offset]
        [query_count]yes[/query_count]
        [with]
          [sql]
            SELECT object_id as data_id FROM training_meta where coll_type='training' 
            and meta_key='training_status' and meta_value!=''
            group by object_id
          [/sql]
        [/with]
        [transform ref_id=data_id /]
        [meta new]
          [table]training_meta[/table]
          [aw2_collection_keys]object_id,training_title,training_days,training_hrs,created_by,created_datetime,training_status[/aw2_collection_keys]
          [coll_type]training[/coll_type]
        [/meta]
        [order]
          data_id DESC
        [/order]
      [/query]
      [table]
        [column new label='Training Name' meta_key=training_title class='no-sort']
          [calc]
            return "<a href='[app.path /]/edit-training/" + row.object_id + "' data-id='" + row.object_id + "' class='row-single-point'>" + data + "</a>"
          [/calc]
        [/column]
        [column new label='Training Days' meta_key='training_days' class='no-sort' /]
        [column new label='Training Hours' meta_key='training_hrs' class='no-sort' /]
        [column new label='Created By' meta_key='created_by' class='no-sort' /]
        [column new label='Date/Time' meta_key='created_datetime' class='no-sort']
          [calc]
            return spa.manage_api.manage_date(data);
          [/calc]
        [/column]
        [column new label='Status' meta_key=training_status]
        	[calc]
          		var span_class = "brand-success";
          		if(data == 'Inactive'){ span_class = "brand-danger"; }
             return "<span class='row-single-point font-semibold "+ span_class +"'>" + data + "</span>"
          [/calc]
        [/column]
      [/table]
      [datascript]
        function(d){
          d.start_date= spa.manage_api.filters.overview.start_date,
          d.end_date= spa.manage_api.filters.overview.end_date,
          d.generic= spa.manage_api.filters.overview.generic,
          d.location= spa.manage_api.filters.overview.city,
          d.view= spa.manage_api.filters.overview.view
        }
      [/datascript]
      [extraparams]"ordering": false[/extraparams]
    [/after_submit]
  [/module.set_array]
  
  <div class="pad-4-5">
    <div class="row col-md-12 mar-b-3">
      <div class="col-md-6">
        <h1 class="font-size-larger font-bold"> Trainings </h1>
      </div>
      <div class="col-md-6">
        <a href="[aw2.get url.site /]training/add-training" class="btn btn-primary float-right"> Add Training</a>
      </div>
    </div>
    <div class="row col-md-12">	
      <div class="map-container col-md-12 ihp-content division-details">
        <div class="gap-8 br-top"></div> 
        <div class="brand-white-bg pad-7 table-main box-shadow box-shadow-bottom manage-table-wrapper">
					[manage_service.manage-table args='{module.args}' /]
        </div>
       <div class="gap-8"></div>
      </div>
    </div>
  </div>
  
[/templates.add]]]></content:encoded>
		<excerpt:encoded><![CDATA[]]></excerpt:encoded>
		<wp:post_id>866321</wp:post_id>
		<wp:post_date><![CDATA[2020-10-15 10:57:15]]></wp:post_date>
		<wp:post_date_gmt><![CDATA[2020-10-15 05:27:15]]></wp:post_date_gmt>
		<wp:post_modified><![CDATA[2020-10-16 11:33:55]]></wp:post_modified>
		<wp:post_modified_gmt><![CDATA[2020-10-16 06:03:55]]></wp:post_modified_gmt>
		<wp:comment_status><![CDATA[closed]]></wp:comment_status>
		<wp:ping_status><![CDATA[closed]]></wp:ping_status>
		<wp:post_name><![CDATA[home]]></wp:post_name>
		<wp:status><![CDATA[publish]]></wp:status>
		<wp:post_parent>0</wp:post_parent>
		<wp:menu_order>0</wp:menu_order>
		<wp:post_type><![CDATA[m_training]]></wp:post_type>
		<wp:post_password><![CDATA[]]></wp:post_password>
		<wp:is_sticky>0</wp:is_sticky>
														<wp:postmeta>
		<wp:meta_key><![CDATA[_edit_last]]></wp:meta_key>
		<wp:meta_value><![CDATA[68]]></wp:meta_value>
		</wp:postmeta>
							</item>
			
				
				</channel>
</rss>